"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8022],{91806:function(w,I,n){n.d(I,{Z:function(){return Z}});var i=n(87462),j=n(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"},p=g,E=n(84089),v=function(F,W){return j.createElement(E.Z,(0,i.Z)({},F,{ref:W,icon:p}))},P=j.forwardRef(v),Z=P},96781:function(w,I,n){var i=n(67294),j=(0,i.createContext)({});I.Z=j},83536:function(w,I,n){n.r(I),n.d(I,{default:function(){return re}});var i=n(64599),j=n.n(i),g=n(15009),p=n.n(g),E=n(99289),v=n.n(E),P=n(80821),Z=n(90098),Q=n(43425),F=n(86548),W=n(23430),q=n(90078),_=n(78099),z=n(82346),ee=n(28036),V=n(25593),D=n(42075),te=n(96074),M=n(83062),N=n(67294),ne=n(94359),X=n(67255),J=n(93162),Y=n(24963),O=n(66309),c=n(85893);function ae(y){var R=(0,z.useIntl)(),K=(0,N.useContext)(Y.Z),b=K.lang,$;if(!y.type)$=(0,c.jsx)(O.Z,{children:b("compose.type.default")});else switch(y.type){case"remoteUrl":$=(0,c.jsx)(O.Z,{color:"cyan",children:b("compose.type.".concat(y.type))});break;case"serverPath":$=(0,c.jsx)(O.Z,{color:"blue",children:b("compose.type.".concat(y.type))});break;case"storagePath":$=(0,c.jsx)(O.Z,{color:"geekblue",children:b("compose.type.".concat(y.type))});break;case"outPath":$=(0,c.jsx)(O.Z,{color:"yellow",children:b("compose.type.".concat(y.type))});break;case"store":$=(0,c.jsx)(O.Z,{color:"green",children:b("compose.type.".concat(y.type))});break;case"dangling":$=(0,c.jsx)(O.Z,{color:"error",children:b("compose.type.".concat(y.type))});break;default:$=(0,c.jsx)(O.Z,{children:b("compose.type.".concat(y.type))})}return(0,c.jsx)(M.Z,{title:y.tootip,children:$})}var k=n(96781),oe=n(73587);function re(){var y=(0,N.useContext)(k.Z),R=y.listTableRef,K=(0,N.useContext)(Y.Z),b=K.lang,$=K.notice,U=(0,N.useRef)();return(0,c.jsxs)(q._z,{header:{extra:[(0,c.jsx)(z.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,c.jsx)(ee.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:[(0,c.jsx)(oe.Z,{ref:U,onClose:function(){var t;!((t=R.current)===null||t===void 0)&&t.reloadAndRest&&R.current.reloadAndRest()}}),(0,c.jsx)(_.Z,{scroll:{x:"max-content"},request:function(){var o=v()(p()().mark(function t(e){var r;return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,Z.pm)({title:e.title,name:e.name});case 2:return r=l.sent,l.abrupt("return",{data:r.data.list,success:!0,total:r.data.list.length});case 4:case"end":return l.stop()}},t)}));return function(t){return o.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(t,e,r,a,l){return(0,c.jsx)(V.Z.Link,{onClick:function(){var f;(f=U.current)===null||f===void 0||f.show(e.id||e.name)},children:e.name})},sorter:function(t,e){return t.name.localeCompare(e.name)},sortDirections:["descend","ascend"]},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(t,e,r,a,l){var u;return(0,c.jsx)(ae,{tootip:(u=e.setting.uri)!==null&&u!==void 0?u:"",type:e.setting&&e.setting.type?e.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(t,e,r,a,l){return(0,c.jsx)(D.Z,{children:e.setting.status.split(", ").map(function(u,f){var m="running",s=u.indexOf("(");return s>-1?m=u.slice(0,s):m=u,(0,c.jsx)(ne.Z,{status:m,message:{content:b("compose.status.".concat(m),{count:u.slice(s+1,u.length-1)}),title:e.setting.message,placement:"top",showInTag:!0}},f)})})},sorter:function(t,e){return t.setting.status.localeCompare(e.setting.status)}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(t,e,r,a,l){return e.setting.createdAt?new Date(e.setting.createdAt).toLocaleString():"-"},sorter:function(t,e){var r,a;return new Date((r=t.setting.createdAt)!==null&&r!==void 0?r:"").toLocaleString().localeCompare(new Date((a=e.setting.createdAt)!==null&&a!==void 0?a:"").toLocaleString())}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(t,e,r,a,l){return e.setting.updatedAt?new Date(e.setting.updatedAt).toLocaleString():"-"},sorter:function(t,e){var r,a;return new Date((r=t.setting.updatedAt)!==null&&r!==void 0?r:"").toLocaleString().localeCompare(new Date((a=e.setting.updatedAt)!==null&&a!==void 0?a:"").toLocaleString())}},{title:"\u64CD\u4F5C",width:80,valueType:"option",fixed:"right",key:"option",render:function(t,e,r,a,l){return e.setting.type!="dangling"&&(0,c.jsxs)(D.Z,{split:(0,c.jsx)(te.Z,{type:"vertical"}),children:[(0,c.jsx)(V.Z.Link,{onClick:function(){var f;(f=U.current)===null||f===void 0||f.show(e.id||e.name)},children:(0,c.jsx)(M.Z,{title:"\u90E8\u7F72",children:(0,c.jsx)(Q.Z,{})})},"3"),(0,c.jsx)(z.Link,{to:"/compose/create?id="+(e.id||e.name),children:(0,c.jsx)(M.Z,{title:"\u7F16\u8F91",children:(0,c.jsx)(F.Z,{})})},"4"),(0,c.jsx)(V.Z.Link,{onClick:v()(p()().mark(function u(){var f,m;return p()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,Z.tw)({id:e.id||e.name});case 2:f=h.sent,m=new Blob([f],{type:"application/zip"}),(0,J.saveAs)(m,"compose-"+e.name+".zip");case 5:case"end":return h.stop()}},u)})),children:(0,c.jsx)(M.Z,{title:"\u4E0B\u8F7D",children:(0,c.jsx)(W.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(t){return{disabled:t.setting.type=="dangling"||t.setting.type=="outPath"}}},tableAlertOptionRender:function(t){var e=t.selectedRows;return(0,c.jsx)(D.Z,{size:16,children:(0,c.jsx)(P.Z,{danger:!0,type:"primary",action:v()(p()().mark(function r(){var a,l,u,f;return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:s.prev=0,l=j()(e),s.prev=2,l.s();case 4:if((u=l.n()).done){s.next=11;break}return f=u.value,s.next=8,(0,Z.mg)({id:f.id||f.name});case 8:a=s.sent;case 9:s.next=4;break;case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(2),l.e(s.t0);case 16:return s.prev=16,l.f(),s.finish(16);case 19:s.next=23;break;case 21:s.prev=21,s.t1=s.catch(0);case 23:return s.abrupt("return",(0,Z.ik)({id:e.map(function(h){return h.id})}));case 24:case"end":return s.stop()}},r,null,[[0,21],[2,13,16,19]])})),onSuccess:function(){var a,l;return!((a=R.current)===null||a===void 0)&&a.reloadAndRest&&((l=R.current)===null||l===void 0||l.reloadAndRest()),!0},onError:function(){var a,l;return!((a=R.current)===null||a===void 0)&&a.reset&&((l=R.current)===null||l===void 0||l.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,X.O)(),search:{collapsed:!1},actionRef:R,columnsState:(0,X.j)("compose-list")})]})}},67255:function(w,I,n){n.d(I,{O:function(){return i},j:function(){return j}});function i(){var g=localStorage.getItem("dpanel-pagesize");return g=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(g!=null?g:"20")}}function j(g){var p="dpanel-table-column-".concat(g),E={};if(localStorage.getItem(p)){var v;E=JSON.parse((v=localStorage.getItem(p))!==null&&v!==void 0?v:"{}")}return{defaultValue:E,onChange:function(Z){localStorage.setItem("dpanel-table-column-".concat(g),JSON.stringify(Z))}}}},38925:function(w,I,n){n.d(I,{Z:function(){return U}});var i=n(67294),j=n(89739),g=n(4340),p=n(97937),E=n(21640),v=n(78860),P=n(93967),Z=n.n(P),Q=n(29372),F=n(64217),W=n(42550),q=n(96159),_=n(53124),z=n(11568),ee=n(14747),V=n(83559);const D=(o,t,e,r,a)=>({background:o,border:`${(0,z.bf)(r.lineWidth)} ${r.lineType} ${t}`,[`${a}-icon`]:{color:e}}),te=o=>{const{componentCls:t,motionDurationSlow:e,marginXS:r,marginSM:a,fontSize:l,fontSizeLG:u,lineHeight:f,borderRadiusLG:m,motionEaseInOutCirc:s,withDescriptionIconSize:h,colorText:T,colorTextHeading:H,withDescriptionPadding:L,defaultPadding:C}=o;return{[t]:Object.assign(Object.assign({},(0,ee.Wf)(o)),{position:"relative",display:"flex",alignItems:"center",padding:C,wordWrap:"break-word",borderRadius:m,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:l,lineHeight:f},"&-message":{color:H},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${e} ${s}, opacity ${e} ${s},
        padding-top ${e} ${s}, padding-bottom ${e} ${s},
        margin-bottom ${e} ${s}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:L,[`${t}-icon`]:{marginInlineEnd:a,fontSize:h,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:r,color:H,fontSize:u},[`${t}-description`]:{display:"block",color:T}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},M=o=>{const{componentCls:t,colorSuccess:e,colorSuccessBorder:r,colorSuccessBg:a,colorWarning:l,colorWarningBorder:u,colorWarningBg:f,colorError:m,colorErrorBorder:s,colorErrorBg:h,colorInfo:T,colorInfoBorder:H,colorInfoBg:L}=o;return{[t]:{"&-success":D(a,r,e,o,t),"&-info":D(L,H,T,o,t),"&-warning":D(f,u,l,o,t),"&-error":Object.assign(Object.assign({},D(h,s,m,o,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},N=o=>{const{componentCls:t,iconCls:e,motionDurationMid:r,marginXS:a,fontSizeIcon:l,colorIcon:u,colorIconHover:f}=o;return{[t]:{"&-action":{marginInlineStart:a},[`${t}-close-icon`]:{marginInlineStart:a,padding:0,overflow:"hidden",fontSize:l,lineHeight:(0,z.bf)(l),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${e}-close`]:{color:u,transition:`color ${r}`,"&:hover":{color:f}}},"&-close-text":{color:u,transition:`color ${r}`,"&:hover":{color:f}}}}},ne=o=>({withDescriptionIconSize:o.fontSizeHeading3,defaultPadding:`${o.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${o.paddingMD}px ${o.paddingContentHorizontalLG}px`});var X=(0,V.I$)("Alert",o=>[te(o),M(o),N(o)],ne),J=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(o);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(o,r[a])&&(e[r[a]]=o[r[a]]);return e};const Y={success:j.Z,info:v.Z,error:g.Z,warning:E.Z},O=o=>{const{icon:t,prefixCls:e,type:r}=o,a=Y[r]||null;return t?(0,q.wm)(t,i.createElement("span",{className:`${e}-icon`},t),()=>({className:Z()(`${e}-icon`,t.props.className)})):i.createElement(a,{className:`${e}-icon`})},c=o=>{const{isClosable:t,prefixCls:e,closeIcon:r,handleClose:a,ariaProps:l}=o,u=r===!0||r===void 0?i.createElement(p.Z,null):r;return t?i.createElement("button",Object.assign({type:"button",onClick:a,className:`${e}-close-icon`,tabIndex:0},l),u):null};var k=i.forwardRef((o,t)=>{const{description:e,prefixCls:r,message:a,banner:l,className:u,rootClassName:f,style:m,onMouseEnter:s,onMouseLeave:h,onClick:T,afterClose:H,showIcon:L,closable:C,closeText:G,closeIcon:B,action:le,id:fe}=o,me=J(o,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[se,ve]=i.useState(!1),ie=i.useRef(null);i.useImperativeHandle(t,()=>({nativeElement:ie.current}));const{getPrefixCls:ge,direction:pe,alert:d}=i.useContext(_.E_),x=ge("alert",r),[he,Ce,ye]=X(x),xe=S=>{var A;ve(!0),(A=o.onClose)===null||A===void 0||A.call(o,S)},ce=i.useMemo(()=>o.type!==void 0?o.type:l?"warning":"info",[o.type,l]),$e=i.useMemo(()=>typeof C=="object"&&C.closeIcon||G?!0:typeof C=="boolean"?C:B!==!1&&B!==null&&B!==void 0?!0:!!(d!=null&&d.closable),[G,B,C,d==null?void 0:d.closable]),de=l&&L===void 0?!0:L,Se=Z()(x,`${x}-${ce}`,{[`${x}-with-description`]:!!e,[`${x}-no-icon`]:!de,[`${x}-banner`]:!!l,[`${x}-rtl`]:pe==="rtl"},d==null?void 0:d.className,u,f,ye,Ce),Ie=(0,F.Z)(me,{aria:!0,data:!0}),je=i.useMemo(()=>{var S,A;return typeof C=="object"&&C.closeIcon?C.closeIcon:G||(B!==void 0?B:typeof(d==null?void 0:d.closable)=="object"&&(!((S=d==null?void 0:d.closable)===null||S===void 0)&&S.closeIcon)?(A=d==null?void 0:d.closable)===null||A===void 0?void 0:A.closeIcon:d==null?void 0:d.closeIcon)},[B,C,G,d==null?void 0:d.closeIcon]),Ee=i.useMemo(()=>{const S=C!=null?C:d==null?void 0:d.closable;if(typeof S=="object"){const{closeIcon:A}=S;return J(S,["closeIcon"])}return{}},[C,d==null?void 0:d.closable]);return he(i.createElement(Q.ZP,{visible:!se,motionName:`${x}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:S=>({maxHeight:S.offsetHeight}),onLeaveEnd:H},(S,A)=>{let{className:ue,style:Ze}=S;return i.createElement("div",Object.assign({id:fe,ref:(0,W.sQ)(ie,A),"data-show":!se,className:Z()(Se,ue),style:Object.assign(Object.assign(Object.assign({},d==null?void 0:d.style),m),Ze),onMouseEnter:s,onMouseLeave:h,onClick:T,role:"alert"},Ie),de?i.createElement(O,{description:e,icon:o.icon,prefixCls:x,type:ce}):null,i.createElement("div",{className:`${x}-content`},a?i.createElement("div",{className:`${x}-message`},a):null,e?i.createElement("div",{className:`${x}-description`},e):null),le?i.createElement("div",{className:`${x}-action`},le):null,i.createElement(c,{isClosable:$e,prefixCls:x,closeIcon:je,handleClose:xe,ariaProps:Ee}))}))}),oe=n(15671),re=n(43144),y=n(53640),R=n(60136),b=function(o){function t(){var e;return(0,oe.Z)(this,t),e=(0,y.Z)(this,t,arguments),e.state={error:void 0,info:{componentStack:""}},e}return(0,R.Z)(t,o),(0,re.Z)(t,[{key:"componentDidCatch",value:function(r,a){this.setState({error:r,info:a})}},{key:"render",value:function(){const{message:r,description:a,id:l,children:u}=this.props,{error:f,info:m}=this.state,s=(m==null?void 0:m.componentStack)||null,h=typeof r=="undefined"?(f||"").toString():r,T=typeof a=="undefined"?s:a;return f?i.createElement(k,{id:l,type:"error",message:h,description:i.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},T)}):u}}])}(i.Component);const $=k;$.ErrorBoundary=b;var U=$},53640:function(w,I,n){n.d(I,{Z:function(){return p}});var i=n(61120),j=n(78814),g=n(82963);function p(E,v,P){return v=(0,i.Z)(v),(0,g.Z)(E,(0,j.Z)()?Reflect.construct(v,P||[],(0,i.Z)(E).constructor):v.apply(E,P))}}}]);
