"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{80821:function(ee,P,n){n.d(P,{Z:function(){return T}});var Z=n(5574),m=n.n(Z),D=n(24963),o=n(86738),C=n(28036),j=n(83062),w=n(67294),v=n(85893);function T(u){var x=(0,w.useState)(!1),A=m()(x,2),M=A[0],K=A[1],$=(0,w.useContext)(D.Z),I=$.lang,y=$.notice,S=$.message,E=function(){K(!0);var ne=u.action();ne instanceof Promise?ne.then(function(h){if(K(!1),h){typeof u.onSuccess=="function"&&u.onSuccess(h);var a="";u.messageSuccess?typeof u.messageSuccess=="function"?a=u.messageSuccess(h):a=u.messageSuccess.indexOf("notification.")==0?I(u.messageSuccess):u.messageSuccess:a=I("notification.finish"),u.asynced?S.info(a):S.success(a)}}).catch(function(h){K(!1),typeof u.onError=="function"&&u.onError(h)}):K(!1)};return u.confirm?(0,v.jsx)(o.Z,{style:{width:500},title:u.confirmTitle?u.confirmTitle:I("notification.title.tip"),description:typeof u.confirm=="string"&&u.confirm.indexOf("notification.")==0?I(u.confirm):u.confirm,onConfirm:E,okText:"Yes",cancelText:"No",onOpenChange:u.confirmOnOpenChange,children:(0,v.jsx)(C.ZP,{block:u.block,disabled:u.disabled,icon:u.icon,loading:M,danger:u.danger,type:u.type,children:u.children})}):(0,v.jsx)(j.Z,{title:u.tips,children:(0,v.jsx)(C.ZP,{block:u.block,style:u.ghost?{padding:0,height:"auto"}:{},disabled:u.disabled,icon:u.icon,loading:M,onClick:E,danger:u.danger,type:u.type,children:u.children})})}},81366:function(ee,P,n){var Z=n(19632),m=n.n(Z),D=n(5574),o=n.n(D),C=n(27254),j=n(42075),w=n(28036),v=n(25593),T=n(67294),u=n(31112),x=n(85893),A=(0,T.forwardRef)(function(M,K){var $=(0,T.useContext)(u.Z),I=$.showPath,y=(0,T.useState)([{title:"\u6839\u76EE\u5F55",path:"/"}]),S=o()(y,2),E=S[0],k=S[1];(0,T.useImperativeHandle)(K,function(){return{addHistory:function(a,b){k([].concat(m()(E),[{title:a,path:b}]))},initHistory:function(a){k([{title:"\u6839\u76EE\u5F55",path:"/"}].concat(m()(a)))}}});var ne=function(a){I?I(E[a].title,E[a].path):M.showPath&&M.showPath(E[a].title,E[a].path);var b=E.filter(function(i,ie){return ie<=a});k(m()(b))};return(0,x.jsxs)(j.Z,{children:[(0,x.jsx)(j.Z.Compact,{children:E.map(function(h,a){return(0,x.jsx)(w.ZP,{icon:(0,x.jsx)(C.Z,{}),type:"dashed",onClick:function(){ne(a)},children:h.title},a)})}),E.length>=2&&(0,x.jsx)(v.Z.Text,{copyable:{text:E[E.length-1].path}})]})});P.Z=A},31112:function(ee,P,n){var Z=n(67294),m=(0,Z.createContext)({});P.Z=m},68536:function(ee,P,n){n.d(P,{Z:function(){return u}});var Z=n(24963),m=n(93613),D=n(36693),o=n(2741),C=n(25593),j=n(42075),w=n(67294),v=n(85893),T=0;function u(x){var A=(0,w.useContext)(Z.Z),M=A.message;return x.isDir?(0,v.jsx)(C.Z.Link,{onClick:function(){x.onClick&&x.onClick()},children:(0,v.jsxs)(j.Z,{children:[(0,v.jsx)(m.Z,{}),x.showName]})}):x.isLink?(0,v.jsx)(C.Z.Link,{onClick:function(){x.onClick&&x.onClick()},children:(0,v.jsxs)(j.Z,{children:[(0,v.jsx)(D.Z,{}),x.showName]})}):(0,v.jsx)(C.Z.Text,{onClick:function(){if(T++,T==2){T=0,x.onClick&&x.onClick();return}setTimeout(function(){T==1&&M.info("\u53CC\u51FB\u67E5\u770B\u6587\u4EF6\u5185\u5BB9"),T=0},400)},style:{cursor:"pointer"},children:(0,v.jsxs)(j.Z,{children:[(0,v.jsx)(o.Z,{}),x.showName]})})}},92754:function(ee,P,n){var Z=n(5574),m=n.n(Z),D=n(67294),o=n(82346),C=n(38703),j=n(85893),w=(0,D.forwardRef)(function(v,T){var u=(0,D.useState)(""),x=m()(u,2),A=x[0],M=x[1];(0,D.useImperativeHandle)(T,function(){return{setFinish:function(){S({finish:{downloading:100,extracting:100}})},setStart:function(k){k&&M(k),S({start:{downloading:0,extracting:0}})},close:function(){K.progress.close("image:pull:"+A),S({start:{downloading:0,extracting:0}})}}});var K=(0,o.useModel)("subscriber");K.addDataHandler("image:pull:"+A,function(E){S(E.data)});var $=(0,D.useState)(),I=m()($,2),y=I[0],S=I[1];return(0,D.useEffect)(function(){return S({start:{downloading:0,extracting:0}}),function(){K.progress.close("image:pull:"+A)}},[]),(0,j.jsx)(j.Fragment,{children:y&&Object.keys(y).map(function(E){return(0,j.jsx)(C.Z,{percent:y[E].downloading,success:{percent:y[E].extracting}},E)})})});P.Z=w},76428:function(ee,P,n){n.d(P,{Z:function(){return o}});var Z=n(25593),m=n(67294),D=n(85893);function o(C){return(0,D.jsx)(Z.Z.Text,{copyable:!0,children:C.title})}},24963:function(ee,P,n){var Z=n(67294),m=(0,Z.createContext)({});P.Z=m},65913:function(ee,P,n){var Z=n(5574),m=n.n(Z),D=n(74330),o=n(67294),C=n(85893),j=(0,o.forwardRef)(function(w,v){(0,o.useImperativeHandle)(v,function(){return{show:function(){A(!0)},destroy:function(){A(!1)}}});var T=(0,o.useState)(!1),u=m()(T,2),x=u[0],A=u[1];return(0,C.jsx)(D.Z,{spinning:x,size:"default",children:w.children})});P.Z=j},7267:function(ee,P,n){n.r(P),n.d(P,{default:function(){return ze}});var Z=n(19632),m=n.n(Z),D=n(15009),o=n.n(D),C=n(99289),j=n.n(C),w=n(5574),v=n.n(w),T=n(90078),u=n(78099),x=n(37476),A=n(62370),M=n(5966),K=n(31418),$=n(28036),I=n(25593),y=n(42075),S=n(66309),E=n(96074),k=n(83062),ne=n(84567),h=n(50136),a=n(67294),b=n(82346),i=n(18148),ie=n(5251),ue=n(80821),me=n(43425),he=n(64789),ve=n(58638),ge=n(1912),De=n(28307),_e=n(96042),xe=n(67255),Ee=n(24963),re=n(3393),je=n(93162),Re=n(95591),le=n(184),ce=n(68536),Pe=n(81366),e=n(85893),Te=(0,a.forwardRef)(function(z,ae){(0,a.useImperativeHandle)(ae,function(){return{show:function(){}}});var se=(0,a.useState)(""),H=v()(se,2),p=H[0],B=H[1],t=(0,a.useState)(!1),G=v()(t,2),V=G[0],Y=G[1],J=(0,a.useRef)(),X=(0,a.useRef)(),te=function(F,R){B(R)};return(0,e.jsx)(le.a,{open:V,submitter:!1,title:"\u955C\u50CF\u6587\u4EF6\u67E5\u770B",onOpenChange:function(F){Y(F),B(F?"/":"")},trigger:(0,e.jsx)(I.Z.Link,{children:(0,e.jsx)(Re.Z,{})},"file"),children:(0,e.jsx)(u.Z,{headerTitle:(0,e.jsx)(Pe.Z,{ref:X,showPath:te}),scroll:{x:"max-content"},search:!1,rowKey:"showName",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:J,request:j()(o()().mark(function L(){var F;return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(console.log(p),p!=""){f.next=3;break}return f.abrupt("return",{data:[],total:0,success:!0});case 3:return f.next=5,(0,re.cD)({md5:z.imageInfo.info.Id,path:p});case 5:return F=f.sent,f.abrupt("return",{data:F.data.info,total:F.data.info.length,success:!0});case 7:case"end":return f.stop()}},L)})),columns:[{title:"\u540D\u79F0",dataIndex:"showName",key:"name",render:function(g,R,f,d,s){var g;return R.isDir?g=(0,e.jsx)(ce.Z,{isDir:!0,onClick:function(){return te(R.showName,R.name)},showName:R.showName}):R.linkName?g=(0,e.jsx)(ce.Z,{isLink:!0,showName:"".concat(R.showName)}):g=(0,e.jsx)(ce.Z,{showName:R.showName}),g}},{title:"\u6743\u9650",dataIndex:"mode",key:"mode"},{title:"\u7528\u6237",dataIndex:"owner"},{title:"\u7528\u6237\u7EC4",dataIndex:"group"},{title:"\u5927\u5C0F",dataIndex:"size",key:"size"},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"modTime",key:"modTime",render:function(F,R,f,d,s){return(0,ie.NF)(R.modTime)},sorter:function(F,R){return new Date(F.modTime).getTime()-new Date(R.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(z.imageInfo.info.Id,"-").concat(p))})}),Oe=Te,pe=n(65913),Ze=n(87784),Ie=n(40666),ye=n(77171),Ae=n(48689),de=n(45742),oe=n(38345),Se=n(7529),be=n(85265),W=n(26412),Fe=n(60940),Me=n(97269),Be=n(65233),Ce=n(2487),Le=n(4393),Ue=n(76428),we=(0,a.forwardRef)(function(z,ae){(0,a.useImperativeHandle)(ae,function(){return{show:function(d){return j()(o()().mark(function s(){var g,O;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return F(!0),(g=R.current)===null||g===void 0||g.show(),r.prev=2,r.next=5,(0,re.cd)({imageName:d}).finally(function(){var c;(c=R.current)===null||c===void 0||c.destroy()});case 5:O=r.sent,t(O.data.list),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),F(!1);case 12:case"end":return r.stop()}},s,null,[[2,9]])}))()}}});var se=(0,b.useAccess)(),H=(0,a.useState)(),p=v()(H,2),B=p[0],t=p[1],G=(0,a.useState)(""),V=v()(G,2),Y=V[0],J=V[1],X=(0,a.useState)(!1),te=v()(X,2),L=te[0],F=te[1],R=(0,a.useRef)();return(0,e.jsx)(le.a,{open:L,onOpenChange:function(d){F(d),!d&&t(void 0)},title:"\u8FDC\u7A0B Tag \u5217\u8868",isKeyPressSubmit:!0,submitter:!1,drawerProps:{extra:(0,e.jsx)(Me.A,{isKeyPressSubmit:!0,onFinish:function(d){J(d.search)},submitter:!1,children:(0,e.jsx)(y.Z.Compact,{children:(0,e.jsx)(A.Z,{style:{margin:0},name:"search",children:(0,e.jsx)(Be.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){J("")}})})})})},children:(0,e.jsx)(pe.Z,{ref:R,children:(0,e.jsx)(Ce.Z,{rowKey:function(d){return"".concat(d)},grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:5,xxl:6},dataSource:B&&B.filter(function(f){return!Y||f.indexOf(Y)!==-1}),loading:!B||(B==null?void 0:B.length)<=0,renderItem:function(d,s){return(0,e.jsx)(Ce.Z.Item,{children:(0,e.jsx)(Le.Z,{style:{height:"60px"},children:(0,e.jsx)("div",{style:{margin:"-10px",wordBreak:"break-word"},children:(0,e.jsx)(Ue.Z,{title:d})})})},s)}})})},"form")}),Ke=we;function We(z){var ae=(0,a.useRef)(),se=(0,a.useState)(!1),H=v()(se,2),p=H[0],B=H[1];return(0,e.jsxs)(le.a,{open:p,title:"\u589E\u52A0\u955C\u50CF Tag",onOpenChange:function(G){B(G)},formRef:ae,onFinish:function(){var t=j()(o()().mark(function G(V){var Y,J,X;return o()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,re._U)({md5:(Y=z.imageInfo.info.Id)!==null&&Y!==void 0?Y:"",tag:(V.imageRespo?V.imageRespo.serverAddress+"/":"")+V.imageTag});case 2:X=L.sent,B(!1),(J=ae.current)===null||J===void 0||J.resetFields(),z.onFinish&&z.onFinish();case 6:case"end":return L.stop()}},G)}));return function(G){return t.apply(this,arguments)}}(),trigger:(0,e.jsx)(k.Z,{title:"\u589E\u52A0\u955C\u50CFTag",children:(0,e.jsx)($.ZP,{type:"link",icon:(0,e.jsx)(he.Z,{})})}),children:[(0,e.jsx)(A.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,e.jsxs)(e.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,e.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,e.jsx)(_e.Z,{})}),(0,e.jsx)(M.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}var $e=(0,a.forwardRef)(function(z,ae){var se;(0,a.useImperativeHandle)(ae,function(){return{show:function(c){return j()(o()().mark(function _(){return o()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return X(!0),U.next=3,l(c);case 3:case"end":return U.stop()}},_)}))()}}});var H=(0,a.useRef)(),p=(0,a.useState)(),B=v()(p,2),t=B[0],G=B[1],V=(0,a.useState)(!1),Y=v()(V,2),J=Y[0],X=Y[1],te=(0,a.useContext)(Ee.Z),L=te.message,F=(0,a.useState)(0),R=v()(F,2),f=R[0],d=R[1],s=(0,b.useNavigate)(),g=(0,b.useAccess)(),O=(0,a.useRef)(),l=function(){var r=j()(o()().mark(function c(_){var N,U;return o()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return(N=H.current)===null||N===void 0||N.show(),q.next=3,(0,re.YU)({md5:_,showLayer:!0}).finally(function(){var fe;(fe=H.current)===null||fe===void 0||fe.destroy()});case 3:U=q.sent,G(U.data);case 5:case"end":return q.stop()}},c)}));return function(_){return r.apply(this,arguments)}}();return(0,a.useEffect)(function(){t&&l(t==null?void 0:t.info.Id)},[f]),(0,e.jsx)(be.Z,{title:"\u5FEB\u6377\u67E5\u770B\u955C\u50CF",open:J,onClose:function(){X(!1),z.onClose&&z.onClose()},width:800,extra:(0,e.jsxs)(y.Z,{split:(0,e.jsx)(E.Z,{type:"vertical"}),children:[(t==null?void 0:t.info)&&(0,e.jsx)(Oe,{imageInfo:t}),(t==null?void 0:t.info)&&(0,e.jsx)(We,{imageInfo:t,onFinish:function(){l(t.info.Id)}})]}),children:(0,e.jsxs)(pe.Z,{ref:H,children:[g.canSeeImageRemoteTag&&(0,e.jsx)(Ke,{ref:O}),(0,e.jsxs)(oe.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,e.jsx)(oe.Z,{title:(0,e.jsx)(me.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",ghost:!0,children:(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(ue.Z,{icon:(0,e.jsx)(ve.Z,{}),action:function(){var c;return(0,re.Rb)({md5:(c=t==null?void 0:t.info.RepoTags)!==null&&c!==void 0?c:[""]})},onSuccess:function(c){var _=new Blob([c],{type:"application/tar"});(0,je.saveAs)(_,(t==null?void 0:t.info.RepoTags.join("-"))+".tar")},children:"\u5BFC\u51FA"}),(0,e.jsx)(E.Z,{}),(0,e.jsx)(ue.Z,{icon:(0,e.jsx)(Ze.Z,{}),danger:!0,type:"primary",action:function(){var c;return(0,i.ao)({md5:[(c=t==null?void 0:t.info.Id)!==null&&c!==void 0?c:""],force:!0})},onSuccess:function(){s("/image/list")},confirm:"notification.confirm.title",children:"\u5F3A\u5236\u5220\u9664"})]})}),(0,e.jsx)(oe.Z,{title:(0,e.jsx)(Ie.Z,{}),subTitle:"Tag \u5217\u8868",ghost:!0,children:(0,e.jsx)(Se.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(c,_,N){return(0,e.jsx)(S.Z,{color:"blue",children:(0,e.jsx)(I.Z.Text,{copyable:!0,children:_})},N)}},title:{render:function(c,_,N){return(0,e.jsxs)(y.Z,{children:[(0,e.jsxs)(ue.Z,{action:function(){return(0,re.Gb)({tag:_,type:"push"})},children:[(0,e.jsx)(ge.Z,{})," Push"]}),(0,e.jsxs)(ue.Z,{action:function(){return(0,re.Gb)({tag:_,type:"pull"})},children:[(0,e.jsx)(ye.Z,{})," Pull"]}),g.canSeeImageRemoteTag&&(0,e.jsx)($.ZP,{onClick:function(){var Q;(Q=O.current)===null||Q===void 0||Q.show(_)},children:"\u8FDC\u7A0BTag"}),(0,e.jsx)(ue.Z,{action:function(){return(0,re.Pn)({tag:_})},danger:!0,onSuccess:function(Q){return d(f+1),!0},confirm:"notification.confirm.title",children:(0,e.jsx)(Ae.Z,{})})]},N)}}},dataSource:t==null?void 0:t.info.RepoTags})}),t&&(0,e.jsx)(oe.Z,{title:(0,e.jsx)(de.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(W.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,e.jsx)(W.Z.Item,{label:"ID",children:(0,e.jsx)(I.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var r=j()(o()().mark(function _(N){var U;return o()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,i.Fj)({tag:t==null?void 0:t.info.RepoTags[0],title:N});case 2:U=q.sent,l(t.info.Id),L.success("\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return q.stop()}},_)}));function c(_){return r.apply(this,arguments)}return c}()},children:t==null?void 0:t.info.Id})}),(0,e.jsx)(W.Z.Item,{label:"Parent",children:t==null?void 0:t.info.Parent}),(0,e.jsx)(W.Z.Item,{label:"Size",children:(0,ie.FI)((se=t==null?void 0:t.info.Size)!==null&&se!==void 0?se:0)}),(0,e.jsx)(W.Z.Item,{label:"Created",children:t==null?void 0:t.info.Created}),(0,e.jsxs)(W.Z.Item,{label:"Build",children:["Docker ",t==null?void 0:t.info.DockerVersion," ",t==null?void 0:t.info.Os," ",t==null?void 0:t.info.Architecture]}),(0,e.jsx)(W.Z.Item,{label:"Labels",children:(0,e.jsx)(W.Z,{column:1,bordered:!0,children:(t==null?void 0:t.info.Config.Labels)&&Object.keys(t==null?void 0:t.info.Config.Labels).map(function(r){return(0,e.jsx)(W.Z.Item,{label:r,children:(0,e.jsx)(I.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:t==null?void 0:t.info.Config.Labels[r]},children:t==null?void 0:t.info.Config.Labels[r]})},r)})})})]})}),(0,e.jsx)(oe.Z,{title:(0,e.jsx)(de.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(W.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,e.jsx)(W.Z.Item,{label:"CMD",children:t==null?void 0:t.info.Config.Cmd}),(0,e.jsx)(W.Z.Item,{label:"ENTRYPOINT",children:t==null?void 0:t.info.Config.Entrypoint}),(0,e.jsx)(W.Z.Item,{label:"EXPOSE",children:(t==null?void 0:t.info.Config.ExposedPorts)&&Object.keys(t==null?void 0:t.info.Config.ExposedPorts).map(function(r){return(0,e.jsx)(S.Z,{color:"gray",children:r},r)})}),(0,e.jsx)(W.Z.Item,{label:"VOLUME",children:(t==null?void 0:t.info.Config.Volumes)&&Object.keys(t==null?void 0:t.info.Config.Volumes).map(function(r){return(0,e.jsx)(S.Z,{color:"gray",children:r},r)})}),(0,e.jsx)(W.Z.Item,{label:"Env",children:(0,e.jsx)(W.Z,{column:1,bordered:!0,children:(t==null?void 0:t.info.Config.Env)&&(t==null?void 0:t.info.Config.Env.map(function(r,c){var _=r.split("=");return(0,e.jsx)(W.Z.Item,{label:_[0],children:_[1]},c)}))})})]})}),(t==null?void 0:t.layer)&&(0,e.jsxs)(oe.Z,{title:(0,e.jsx)(de.Z,{}),subTitle:"Layers",ghost:!0,children:[(0,e.jsx)(Fe.Z,{rowKey:"CreatedBy",dataSource:t.layer.reverse(),columns:[{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy"}]}),";"]})]})]})})}),Ne=$e;function ze(){var z=(0,a.useContext)(Ee.Z),ae=z.message,se=z.notice,H=z.lang,p=(0,a.useRef)(),B=(0,a.useState)({force:!1}),t=v()(B,2),G=t[0],V=t[1],Y=K.Z.useApp(),J=(0,a.useState)(1),X=v()(J,2),te=X[0],L=X[1],F=(0,a.useRef)(),R=(0,a.useRef)();return(0,a.useEffect)(function(){var f;(f=p.current)===null||f===void 0||f.reload()},[te]),(0,e.jsxs)(T._z,{header:{extra:[(0,e.jsx)(b.Link,{to:"/image/create",children:(0,e.jsx)($.ZP,{type:"primary",children:"\u521B\u5EFA&\u5BFC\u5165\u955C\u50CF"},"create")},"create"),(0,e.jsx)(De.Z,{onFinish:function(){var d,s;!((d=p.current)===null||d===void 0)&&d.reloadAndRest&&((s=p.current)===null||s===void 0||s.reloadAndRest())}},"remote")]},children:[(0,e.jsx)(Ne,{ref:R,onClose:function(){var d,s;!((d=p.current)===null||d===void 0)&&d.reloadAndRest&&((s=p.current)===null||s===void 0||s.reloadAndRest())}}),(0,e.jsx)(u.Z,{scroll:{x:"max-content"},rowKey:"Id",columns:[{title:"\u540D\u79F0",dataIndex:"title",render:function(d,s,g,O,l){var r=s.Id.substring(7,19);return s.Title&&(r=s.Title),(0,e.jsx)(I.Z.Link,{onClick:function(){var _;!((_=R.current)===null||_===void 0)&&_.show&&R.current.show(s.Id)},children:r},"title-".concat(g))}},{title:"Tag",dataIndex:"tag",render:function(d,s,g,O){return(0,e.jsx)(y.Z,{direction:"vertical",style:{textAlign:"left"},children:s.RepoTags.map(function(l,r){return(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(S.Z,{color:"#2db7f5",children:(0,e.jsx)(I.Z.Text,{copyable:!0,title:l,style:{color:"#ffffff"},children:l},"tag-"+r)},"tag-".concat(r)),s.Containers>0&&(0,e.jsx)(S.Z,{color:"cyan",children:"\u4F7F\u7528\u4E2D"},"use-".concat(r))]},r)})},s.Id)}},{title:"\u4F7F\u7528\u72B6\u6001",hidden:!0,dataIndex:"use",valueEnum:{1:"\u4F7F\u7528\u4E2D",2:"\u672A\u4F7F\u7528"}},{title:"\u67B6\u6784",width:80,search:!1,render:function(d,s,g,O,l){if(s.Labels&&s.Labels["com.dpanel.image.arch"])return(0,e.jsx)(S.Z,{children:s.Labels["com.dpanel.image.arch"]},"arch"+s.Id)}},{title:"\u5927\u5C0F",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(d,s){return parseFloat(d.Size)-parseFloat(s.Size)},render:function(d,s,g,O){return(0,e.jsx)("div",{children:(0,ie.FI)(parseFloat(s.Size))},s.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(d,s,g,O){return(0,e.jsx)("div",{children:(0,ie.ZM)(s.Created*1e3)},s.Id)},sorter:function(d,s){return d.Created-s.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,fixed:"right",render:function(d,s,g,O){return(0,e.jsxs)(y.Z,{split:(0,e.jsx)(E.Z,{type:"vertical"}),children:[(0,e.jsx)(I.Z.Link,{onClick:function(){var r;!((r=R.current)===null||r===void 0)&&r.show&&R.current.show(s.Id)},children:(0,e.jsx)(k.Z,{title:"\u7BA1\u7406",children:(0,e.jsx)(me.Z,{})})},"edit"),(0,e.jsx)(b.Link,{to:"/app/create/image?imageId="+s.RepoTags[0],children:(0,e.jsx)(k.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,e.jsx)(he.Z,{})})},"create")]})}}],request:function(){var f=j()(o()().mark(function d(s,g,O){var l;return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,i.KG)({tag:s.tag,title:s.title,use:s.use?s.use=="1"?1:2:0});case 2:if(l=c.sent,!(!l||!l.data||!l.data.list)){c.next=5;break}return c.abrupt("return",{data:[],success:!0,total:0});case 5:return l.data.list.map(function(_){var N="";_.RepoTags.map(function(U){l.data.title[U]&&(N=l.data.title[U])}),_.Title=N}),c.abrupt("return",{data:l.data.list,success:!0,total:l.data.list.length});case 7:case"end":return c.stop()}},d)}));return function(d,s,g){return f.apply(this,arguments)}}(),pagination:(0,xe.O)(),search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:p,tableAlertOptionRender:function(d){var s=d.selectedRowKeys,g=d.selectedRows;return(0,e.jsxs)(y.Z,{size:16,children:[(0,e.jsx)(ue.Z,{icon:(0,e.jsx)(ve.Z,{}),action:function(){var l=[];return g.map(function(r){l.push.apply(l,m()(r.RepoTags))}),(0,re.Rb)({md5:l})},onSuccess:function(l){var r=g.map(function(_){return _.RepoTags[0]}),c=new Blob([l],{type:"application/tar"});(0,je.saveAs)(c,r.join("-")+".tar")},children:"\u5BFC\u51FA"}),(0,e.jsxs)(x.Y,{formRef:F,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,e.jsx)($.ZP,{icon:(0,e.jsx)(ge.Z,{}),children:"\u540C\u6B65\u81F3\u5176\u5B83\u4ED3\u5E93"}),onFinish:function(){var O=j()(o()().mark(function l(r){var c,_,N;return o()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,i.KX)({md5:s,registryId:r.registryId,newNamespace:r.newNamespace});case 2:return N=Q.sent,(c=p.current)===null||c===void 0||c.reload(),!((_=p.current)===null||_===void 0)&&_.clearSelected&&p.current.clearSelected(),Q.abrupt("return",!0);case 6:case"end":return Q.stop()}},l)}));return function(l){return O.apply(this,arguments)}}(),children:[(0,e.jsx)(A.Z,{name:"registryId",hidden:!0}),(0,e.jsx)(A.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,e.jsxs)(e.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,e.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,e.jsx)(_e.Z,{multiple:!0,top:!0,onChangeList:function(l){var r;(r=F.current)===null||r===void 0||r.setFieldValue("registryId",l.map(function(c){return c.id}))}})}),(0,e.jsx)(M.Z,{tooltip:"\u53EF\u4EE5\u901A\u8FC7\u6B64\u9879\u91CD\u65B0\u5B9A\u4E49\u547D\u540D\u7A7A\u95F4\uFF0Cdocker hub \u4E0D\u53D7\u8BE5\u914D\u7F6E\u7684\u5F71\u54CD\u3002 \u914D\u7F6E\u6B64\u9879\u540E mysql:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/mysql:latest\uFF0C dpanel/dpanel:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/dpanel:latest",label:"\u91CD\u5199\u4ED3\u5E93\u547D\u540D\u7A7A\u95F4",name:"newNamespace"})]}),(0,e.jsx)(ue.Z,{danger:!0,type:"primary",action:function(){return(0,i.ao)({md5:s,force:G.force})},onSuccess:function(){var l,r;return!((l=p.current)===null||l===void 0)&&l.reloadAndRest&&((r=p.current)===null||r===void 0||r.reloadAndRest()),!0},onError:function(){var l,r;return!((l=p.current)===null||l===void 0)&&l.reset&&((r=p.current)===null||r===void 0||r.reset()),!0},confirm:(0,e.jsxs)(y.Z,{style:{width:280},direction:"vertical",children:[(0,e.jsx)(I.Z.Text,{children:H("notification.confirm.title")}),(0,e.jsx)(ne.Z,{name:"deleteVolume",onChange:function(l){return V({force:l.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"})]})},tableExtraRender:function(){return(0,e.jsx)(h.Z,{mode:"horizontal",selectedKeys:["all"],items:[{label:(0,e.jsx)(b.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,e.jsx)(b.Link,{to:"/image/list/recycle",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})},toolBarRender:function(){return[(0,e.jsx)(ue.Z,{action:function(){return(0,i.c7)()},onSuccess:function(){var s,g;return!((s=p.current)===null||s===void 0)&&s.reloadAndRest&&((g=p.current)===null||g===void 0||g.reloadAndRest()),!0},onError:function(){var s,g;return!((s=p.current)===null||s===void 0)&&s.reset&&((g=p.current)===null||g===void 0||g.reset()),!0},confirm:"notification.confirm.title",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})]},columnsState:(0,xe.j)("image-list")})]})}},3393:function(ee,P,n){n.d(P,{Gb:function(){return v},Pn:function(){return A},Rb:function(){return K},YU:function(){return j},ZQ:function(){return S},_U:function(){return u},cD:function(){return k},cd:function(){return I}});var Z=n(15009),m=n.n(Z),D=n(99289),o=n.n(D),C=n(82346);function j(h){return w.apply(this,arguments)}function w(){return w=o()(m()().mark(function h(a){return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,C.request)("/api/app/image/get-detail",{method:"POST",data:a}));case 1:case"end":return i.stop()}},h)})),w.apply(this,arguments)}function v(h){return T.apply(this,arguments)}function T(){return T=o()(m()().mark(function h(a){return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,C.request)("/api/app/image/tag-remote",{method:"POST",data:a}));case 1:case"end":return i.stop()}},h)})),T.apply(this,arguments)}function u(h){return x.apply(this,arguments)}function x(){return x=o()(m()().mark(function h(a){return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,C.request)("/api/app/image/tag-add",{method:"POST",data:a}));case 1:case"end":return i.stop()}},h)})),x.apply(this,arguments)}function A(h){return M.apply(this,arguments)}function M(){return M=o()(m()().mark(function h(a){return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,C.request)("/api/app/image/tag-delete",{method:"POST",data:a}));case 1:case"end":return i.stop()}},h)})),M.apply(this,arguments)}function K(h){return $.apply(this,arguments)}function $(){return $=o()(m()().mark(function h(a){return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,C.request)("/api/app/image/export",{method:"POST",data:a,responseType:"blob"}));case 1:case"end":return i.stop()}},h)})),$.apply(this,arguments)}function I(h){return y.apply(this,arguments)}function y(){return y=o()(m()().mark(function h(a){return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,C.request)("/api/pro/image/get-remote-tag",{method:"POST",data:a}));case 1:case"end":return i.stop()}},h)})),y.apply(this,arguments)}function S(h){return E.apply(this,arguments)}function E(){return E=o()(m()().mark(function h(a){return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,C.request)("/api/app/image/check-upgrade",{method:"POST",data:a}));case 1:case"end":return i.stop()}},h)})),E.apply(this,arguments)}function k(h){return ne.apply(this,arguments)}function ne(){return ne=o()(m()().mark(function h(a){return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,C.request)("/api/app/image/get-rootfs",{method:"POST",data:a}));case 1:case"end":return i.stop()}},h)})),ne.apply(this,arguments)}},67255:function(ee,P,n){n.d(P,{O:function(){return Z},j:function(){return m}});function Z(){var D=localStorage.getItem("dpanel-pagesize");return D=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(D!=null?D:"20")}}function m(D){var o="dpanel-table-column-".concat(D),C={};if(localStorage.getItem(o)){var j;C=JSON.parse((j=localStorage.getItem(o))!==null&&j!==void 0?j:"{}")}return{defaultValue:C,onChange:function(v){localStorage.setItem("dpanel-table-column-".concat(D),JSON.stringify(v))}}}}}]);
