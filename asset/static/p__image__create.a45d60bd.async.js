"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7523],{86615:function(w,O,e){var g=e(1413),n=e(45987),y=e(22270),d=e(78045),s=e(67294),h=e(90789),o=e(35510),r=e(85893),c=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],M=s.forwardRef(function(t,m){var T=t.fieldProps,u=t.options,F=t.radioType,C=t.layout,l=t.proFieldProps,B=t.valueEnum,A=(0,n.Z)(t,c);return(0,r.jsx)(o.Z,(0,g.Z)((0,g.Z)({valueType:F==="button"?"radioButton":"radio",ref:m,valueEnum:(0,y.h)(B,void 0)},A),{},{fieldProps:(0,g.Z)({options:u,layout:C},T),proFieldProps:l,filedConfig:{customLightMode:!0}}))}),R=s.forwardRef(function(t,m){var T=t.fieldProps,u=t.children;return(0,r.jsx)(d.ZP,(0,g.Z)((0,g.Z)({},T),{},{ref:m,children:u}))}),v=(0,h.G)(R,{valuePropName:"checked",ignoreWidth:!0}),p=v;p.Group=M,p.Button=d.ZP.Button,p.displayName="ProFormComponent",O.Z=p},1677:function(w,O,e){var g=e(1413),n=e(45987),y=e(88484),d=e(31365),s=e(28036),h=e(67294),o=e(9105),r=e(90789),c=e(85893),M=["fieldProps","action","accept","listType","title","max","icon","buttonProps","disabled","proFieldProps"],R=function(t,m){var T,u=t.fieldProps,F=t.action,C=t.accept,l=t.listType,B=t.title,A=B===void 0?"\u5355\u51FB\u4E0A\u4F20":B,_=t.max,P=t.icon,E=P===void 0?(0,c.jsx)(y.Z,{}):P,f=t.buttonProps,j=t.disabled,D=t.proFieldProps,a=(0,n.Z)(t,M),z=(0,h.useMemo)(function(){var Q;return(Q=a.fileList)!==null&&Q!==void 0?Q:a.value},[a.fileList,a.value]),re=(0,h.useContext)(o.A),le=(D==null?void 0:D.mode)||re.mode||"edit",Y=(_===void 0||!z||(z==null?void 0:z.length)<_)&&le!=="read",oe=(l!=null?l:u==null?void 0:u.listType)==="picture-card";return(0,c.jsx)(d.Z,(0,g.Z)((0,g.Z)({action:F,accept:C,ref:m,listType:l||"picture",fileList:z},u),{},{name:(T=u==null?void 0:u.name)!==null&&T!==void 0?T:"file",onChange:function(k){var W;u==null||(W=u.onChange)===null||W===void 0||W.call(u,k)},children:Y&&(oe?(0,c.jsxs)("span",{children:[E," ",A]}):(0,c.jsxs)(s.ZP,(0,g.Z)((0,g.Z)({disabled:j||(u==null?void 0:u.disabled)},f),{},{children:[E,A]})))}))},v=(0,r.G)(h.forwardRef(R),{getValueFromEvent:function(t){return t.fileList}});O.Z=v},34879:function(w,O,e){e.d(O,{Z:function(){return d}});var g=e(97961),n=e(1677),y=e(85893);function d(s){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(n.Z,{max:1,title:s.title,label:s.label,required:s.required,rules:[{required:s.required}],fieldProps:{name:"file",accept:s.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(o){return new Promise(function(r){var c;(0,g._2)({path:(c=o.response.data.path)!==null&&c!==void 0?c:""}).then(function(M){r(!0)})})}},name:s.name})})}},74344:function(w,O,e){var g=e(5574),n=e.n(g),y=e(37476),d=e(38345),s=e(82346),h=e(67294),o=e(54964),r=e(85893),c=(0,h.forwardRef)(function(M,R){(0,h.useImperativeHandle)(R,function(){return{start:function(){for(var _=arguments.length,P=new Array(_),E=0;E<_;E++)P[E]=arguments[E];C(P.join(":")),m(!0)},reset:function(){var _;(_=B.current)===null||_===void 0||_.clear(),m(!1)},show:function(_){var P,E;(P=B.current)===null||P===void 0||P.clear(),(E=B.current)===null||E===void 0||E.write(_),m(!0)}}});var v=(0,h.useState)(!1),p=n()(v,2),t=p[0],m=p[1],T=(0,h.useState)(""),u=n()(T,2),F=u[0],C=u[1],l=(0,s.useModel)("subscriber"),B=(0,h.useRef)();return l.addDataHandler("image:"+F,function(A){var _;(_=B.current)===null||_===void 0||_.write(A.data)}),(0,h.useEffect)(function(){var A;(A=B.current)===null||A===void 0||A.fit()},[]),(0,r.jsx)(y.Y,{modalProps:{forceRender:!0},title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,width:1e3,onOpenChange:function(_){if(m(_),_){var P,E;(P=B.current)===null||P===void 0||P.clear(),(E=B.current)===null||E===void 0||E.fit()}},open:t,children:(0,r.jsx)(d.Z,{ghost:!0,children:(0,r.jsx)(o.Z,{showInModal:!0,width:"960px",height:"500px",ref:B})})})});O.Z=c},12491:function(w,O,e){e.d(O,{Z:function(){return r}});var g=e(24963),n=e(88484),y=e(62370),d=e(31418),s=e(28036),h=e(67294),o=e(85893);function r(c){var M=(0,h.useContext)(g.Z),R=M.message,v=M.notice,p=M.lang,t=(0,h.useRef)(null),m=d.Z.useApp(),T=function(){t.current&&(t.current.click(),t.current.onchange=function(F){if(!F||!F.target)return"";var C=new FileReader;C.onload=function(B){var A,_,P=(A=B.target)===null||A===void 0?void 0:A.result;if(c.onLoad)try{c.onLoad&&c.onLoad(P)}catch(E){v.error(E);return}typeof c.onImport=="function"&&(R.success("\u6210\u529F\u5BFC\u5165 ".concat(c.title)),c.onImport(P)),(_=t.current)!==null&&_!==void 0&&_.value&&(t.current.value="")};var l=F.target;if(l.files)try{C.readAsText(l.files[0])}catch(B){v.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y.Z,{children:(0,o.jsx)(s.ZP,{icon:(0,o.jsx)(n.Z,{}),block:!0,onClick:T,children:c.title})}),(0,o.jsx)("input",{style:{display:"none"},type:"file",ref:t,name:"importFileInput"})]})}},54964:function(w,O,e){e.d(O,{a:function(){return v}});var g=e(5574),n=e.n(g),y=e(78267),d=e.n(y),s=e(75458),h=e.n(s),o=e(67294),r=e(12320),c=e.n(r),M=e(89629),R=e(85893),v={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},p=new r.Terminal(v),t=new s.SearchAddon,m=new y.FitAddon,T=(0,o.forwardRef)(function(u,F){var C,l=(0,o.useState)(!0),B=n()(l,2),A=B[0],_=B[1];return(0,o.useEffect)(function(){return window.addEventListener("resize",function(){u.showInModal||m.fit()}),u.style&&u.style.fontSize&&(p.options.fontSize=u.style.fontSize),p.loadAddon(m),p.loadAddon(t),p.open(document.getElementById(u.id?u.id:"terminal-container")),u.showInModal||m.fit(),function(){p.reset(),_(!0)}},[]),(0,o.useImperativeHandle)(F,function(){return{write:function(E){A&&(m.fit(),_(!1)),p.write(E)},clear:function(){p.clear()},getTerminal:function(){return p},findNext:function(E){t.findNext(E)},findPrev:function(E){t.findPrevious(E)},fit:function(){m.fit()},onData:function(E){return p.onData(E)}}}),(0,R.jsx)("div",{id:u.id?u.id:"terminal-container",style:{width:u.width?u.width:"100%",height:u.height?u.height:"500px",marginTop:(C=u.style)===null||C===void 0?void 0:C.marginTop}})});O.Z=T},24963:function(w,O,e){var g=e(67294),n=(0,g.createContext)({});O.Z=n},77096:function(w,O,e){e.r(O),e.d(O,{default:function(){return Q}});var g=e(15009),n=e.n(g),y=e(99289),d=e.n(y),s=e(5574),h=e.n(s),o=e(5966),r=e(85893);function c(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u6307\u5B9AGit\u5730\u5740\uFF0C\u79C1\u6709\u4ED3\u5E93\u8BF7\u9644\u52A0\u6743\u9650\u3002\u4EC5\u652F\u6301Master\u5206\u652F",label:"Git\u4ED3\u5E93\u5730\u5740",name:"buildGit"})})}var M=e(34879),R=e(74344),v=e(67294),p=e(95089),t=e(62370),m=e(184),T=e(86615),u=e(97462),F=e(97961),C=e(28036),l=e(34041);function B(k){var W=(0,v.useState)([]),Z=h()(W,2),I=Z[0],te=Z[1];return(0,v.useEffect)(function(){(0,F.MF)().then(function(K){var b=Object.keys(K.data).map(function(J){return K.data[J]});te(b)})},[]),(0,r.jsx)(t.Z,{children:(0,r.jsxs)(m.a,{trigger:(0,r.jsx)(C.ZP,{block:!0,children:"\u4F7F\u7528\u6A21\u677F\u751F\u6210"}),onFinish:function(b){return new Promise(function(J,G){var N=b[b.language+"EnvVersion"].split("|"),ee=h()(N,2),ve=ee[0],de=ee[1],H="FROM ".concat(ve,`
# \u5E94\u7528\u76EE\u5F55\u4F4D\u4E8E /app
# \u53EF\u901A\u7BA1\u5BB9\u5668 - \u6587\u4EF6\u7BA1\u7406, \u4E0A\u4F20\u4EE3\u7801\u81F3\u6B64\u76EE\u5F55\u5E76\u4FEE\u6539\u6743\u9650

WORKDIR /app
VOLUME [ "/app" ]
EXPOSE 80

# \u81EA\u5B9A\u4E49\u5B89\u88C5\u7EC4\u4EF6\u3001\u6269\u5C55\u6216\u662F\u5E93, \u4F8B\u5982:
# RUN apk add --no-cache --update vim
`);switch(b.language){case"php":H+=`
                
# \u7AD9\u70B9\u76EE\u5F55\u4F4D\u4E8E /app/wwwroot \u53EF\u4E0A\u4F20\u6216\u662F\u4FEE\u6539\u7AD9\u70B9\u6587\u4EF6
# nginx \u914D\u7F6E\u4F4D\u4E8E /app/nginx/ \u53EF\u4FEE\u6539\u589E\u52A0\u81EA\u5B9A\u4E49\u914D\u7F6E
# \u901A\u8FC7\u8BBF\u95EE\u5BB9\u5668\u8FD0\u884C\u6620\u5C04\u7AEF\u53E3\uFF0C\u67E5\u770B\u73AF\u5883\u53CA\u6269\u5C55\u4FE1\u606F

`,b.language=="php"&&b.phpExt&&(H+="RUN apk add --no-cache --update ",b.phpExt.map(function(S){H+="php".concat(de,"-").concat(S," ")}));break;case"golang":H+=`
# \u53EF\u4EE5\u4FEE\u6539 RUN_COMMAND \u73AF\u5883\u53D8\u91CF, \u66F4\u6539\u542F\u52A8\u6267\u884C\u547D\u4EE4
ENV RUN_COMMAND="go version"`;break;default:break}k.onFinish(H),J(!0)})},children:[(0,r.jsx)(T.Z.Group,{radioType:"button",name:"language",label:"\u7A0B\u5E8F\u8BED\u8A00",options:I.map(function(K){return{label:K.name,value:K.name}}),required:!0}),(0,r.jsx)(u.Z,{name:["language"],children:function(b){var J=b.language;return J?(0,r.jsx)(r.Fragment,{children:I.map(function(G){if(G.name==J)return(0,r.jsxs)("div",{children:[(0,r.jsx)(t.Z,{name:"".concat(G.name,"EnvVersion"),label:"\u73AF\u5883\u7248\u672C",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7A0B\u5E8F\u8FD0\u884C\u7684\u73AF\u5883"}],children:(0,r.jsx)(l.Z,{options:G.env.map(function(N){return{label:N.name,value:N.baseImage}}),placeholder:"\u8BF7\u9009\u62E9\u5177\u4F53\u7684\u73AF\u5883\u7248\u672C"},"".concat(G.name,"Select"))},G.name),G.name=="php"&&(0,r.jsx)(t.Z,{label:"php\u6269\u5C55",name:"phpExt",children:(0,r.jsx)(l.Z,{options:G.ext.map(function(N){return{label:N,value:N}}),mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u8981\u5B89\u88C5\u7684php\u6269\u5C55"},"phpExtSelect")},"phpExt")]},"envSelect")})}):(0,r.jsx)(r.Fragment,{})}})]})})}var A=e(12491);function _(k){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.Z,{title:"\u5BFC\u5165\u672C\u5730Dockerfile\u6587\u4EF6",onImport:function(Z){var I;return(I=k.createFormRef.current)===null||I===void 0||I.setFieldValue("buildDockerfile",Z),!0},onLoad:function(Z){if(Z.indexOf("FROM ")<0)throw new Error("\u5BFC\u5165Dockerfile\u6587\u4EF6\u9519\u8BEF");return!0}}),(0,r.jsx)(B,{onFinish:function(Z){var I;(I=k.createFormRef.current)===null||I===void 0||I.setFieldValue("buildDockerfile",Z)}}),(0,r.jsx)(t.Z,{shouldUpdate:!0,children:function(Z){var I=Z.getFieldValue;return(0,r.jsx)(t.Z,{name:"buildDockerfile",children:(0,r.jsx)(p.ZP,{value:I("buildDockerfile"),onChange:function(K){var b;(b=k.createFormRef.current)===null||b===void 0||b.setFieldValue("buildDockerfile",K)},height:"600px",theme:"dark",style:{marginBottom:"20px"}})})}})]})}var P=e(24963),E=e(18148),f=e(75870),j=e(38345),D=e(97269),a=e(64317),z=e(90672),re=e(82346),le=e(42075),Y=e(83062),oe=e(91845);function Q(){var k=(0,v.useContext)(P.Z),W=k.loading,Z=k.message,I=(0,v.useRef)(),te=(0,v.useState)([]),K=h()(te,2),b=K[0],J=K[1],G=(0,re.useSearchParams)(),N=h()(G,2),ee=N[0],ve=N[1],de=(0,v.useState)("dockerfile"),H=h()(de,2),S=H[0],Fe=H[1],ce=(0,re.useNavigate)(),ue=(0,v.useRef)();return(0,v.useEffect)(function(){var $,x=($=ee.get("id"))!==null&&$!==void 0?$:0;x&&(W.show(),(0,E.T8)({id:parseInt(x)}).then(function(i){var U;Fe(i.data.task.buildType),(U=I.current)===null||U===void 0||U.setFieldsValue({title:i.data.task.title,imageTag:i.data.task.tag,imageRegistry:i.data.task.setting.registry,uploadType:i.data.task.buildType,buildRoot:i.data.task.setting.buildRoot,buildGit:i.data.task.setting.buildGit,buildDockerfile:i.data.task.setting.buildDockerfile,platform:i.data.task.setting.platform})}).finally(function(){W.destroy()}))},[]),(0,r.jsxs)(j.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,r.jsx)(j.Z,{bordered:!0,headerBordered:!0,children:(0,r.jsxs)(D.A,{submitter:{render:function(x,i){return(0,r.jsx)(le.Z,{children:i})}},onFinish:function(){var $=d()(n()().mark(function x(i){var U,q,ne,V,X,me,pe,_e,Ee,ae,ie,fe,he,Ce,ge;return n()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(S!="containerTar"){L.next=8;break}return L.next=3,(0,F.vC)({tag:i.imageTag,registry:i.imageRegistry,tar:(U=i.containerTar[0].response.data.path)!==null&&U!==void 0?U:"",cmd:i.cmd,workDir:i.workDir,expose:i.expose?i.expose.split(`
`):[],env:i.env?i.env.split(`
`):[],volume:i.volume?i.volume.split(`
`):[]});case 3:return q=L.sent,ce("/image/list"),L.abrupt("return",!0);case 8:if(S!="imageTar"){L.next=20;break}return(ne=ue.current)===null||ne===void 0||ne.start("import",i.imageTag),L.next=12,(0,F.GH)({tag:i.imageTag,tar:(V=i.imageTar[0].response.data.path)!==null&&V!==void 0?V:""});case 12:if(X=L.sent,X.data.tag&&X.data.tag.map(function(se){Z.success("\u5BFC\u5165 "+se+" \u955C\u50CF\u6210\u529F")}),!X){L.next=18;break}return(me=ue.current)===null||me===void 0||me.reset(),ce("/image/list"),L.abrupt("return",!0);case 18:L.next=34;break;case 20:return Ee=(pe=ee.get("id"))!==null&&pe!==void 0?pe:"0",ae=b&&b[0]?b[0].fileName:"",ie={name:"",arch:""},F.ii.map(function(se){se.name==i.platform&&(ie=se)}),fe={id:parseInt(Ee),tag:i.imageTag,title:i.title,registry:i.imageRegistry,buildRoot:i.buildRoot,buildDockerfile:i.buildDockerfile,buildZip:ae!=null?ae:"",buildGit:i.buildGit,buildType:S,platform:ie.name,PlatformArch:ie.arch},i.buildZip&&i.buildZip.length>0&&(fe.buildZip=(he=i.buildZip[0].response.data.path)!==null&&he!==void 0?he:""),(_e=ue.current)===null||_e===void 0||_e.start("build",Ee),L.next=29,(0,F.fN)(fe);case 29:if(Ce=L.sent,!Ce){L.next=34;break}return(ge=ue.current)===null||ge===void 0||ge.reset(),ce("/image/list/recycle"),L.abrupt("return",!0);case 34:case"end":return L.stop()}},x)}));return function(x){return $.apply(this,arguments)}}(),formRef:I,children:[(0,r.jsx)(o.Z,{label:"\u4EFB\u52A1\u540D\u79F0",name:"title",fieldProps:{onChange:function(x){var i="";if(x.target.value){var U,q=(0,oe.N9)(x.target.value.trim(),{toneType:"none",type:"array"});i=q.join(""),(U=I.current)===null||U===void 0||U.setFieldValue("imageTag",i)}}}}),(0,r.jsx)(u.Z,{name:["uploadType"],children:function(x){var i=x.uploadType;if(i!="imageTar")return(0,r.jsx)(a.Z,{label:"\u955C\u50CF\u4ED3\u5E93",tooltip:(0,r.jsxs)(r.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,r.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),name:"imageRegistry",request:d()(n()().mark(function U(){var q;return n()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,f.Ot)();case 2:return q=V.sent,V.abrupt("return",q.data.list.map(function(X){return{value:X.serverAddress,label:X.title+"("+X.serverAddress+")"}}));case 4:case"end":return V.stop()}},U)}))})}}),(0,r.jsx)(u.Z,{name:["imageRegistry","uploadType"],children:function(x){var i=x.imageRegistry,U=x.uploadType;if(U!="imageTar")return(0,r.jsx)(o.Z,{fieldProps:{min:2,max:255,addonBefore:"".concat(i||"","/")},rules:[{required:!0}],required:!0,tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag",placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CFTag",name:"imageTag"})}}),(0,r.jsx)(T.Z.Group,{name:"uploadType",label:"\u6784\u5EFA\u65B9\u5F0F",initialValue:S,options:[{label:(0,r.jsx)(Y.Z,{title:"\u901A\u8FC7 Dockerfile \u6587\u4EF6\u5FEB\u901F\u6784\u5EFA\u955C\u50CF",children:"Dockerfile"}),value:"dockerfile"},{label:(0,r.jsx)(Y.Z,{title:"\u5C06 Dockerfile \u6587\u4EF6\u4E0E\u6784\u5EFA\u955C\u50CF\u7528\u5230\u7684\u8D44\u6E90\uFF0C\u901A\u8FC7\u4E0A\u4F20 Zip \u5305\u7684\u5F62\u5F0F\u6784\u5EFA\u955C\u50CF",children:"Zip\u5305"}),value:"zip"},{label:(0,r.jsx)(Y.Z,{title:"\u5C06 Dockerfile \u6587\u4EF6\u4E0E\u6784\u5EFA\u955C\u50CF\u7528\u5230\u7684\u8D44\u6E90\u653E\u7F6E\u5230 Git \u4ED3\u5E93\u4E2D\uFF0C\u53EF\u4EE5\u6301\u7EED\u6027\u7684\u6784\u5EFA\u955C\u50CF",children:"Git\u6E90\u7801\u4ED3\u5E93"}),value:"git"},{label:(0,r.jsx)(Y.Z,{title:"\u4E0A\u4F20\u5BB9\u5668\u5BFC\u51FA\u7684 Tar \u5305\uFF0C\u5E76\u81EA\u5B9A\u4E49\u53C2\u6570\u6784\u5EFA\u955C\u50CF\u3002\u5982\u679C\u4F60\u4E0D\u9700\u8981\u4FEE\u6539\u5BB9\u5668\u539F\u59CB\u914D\u7F6E\uFF0C\u53EF\u4EE5\u5728\u5BB9\u5668\u8BE6\u60C5\u9875\u4F7F\u7528\u3010\u5C06\u5BB9\u5668\u4FDD\u5B58\u4E3A\u955C\u50CF\u3011\u529F\u80FD",children:"\u5BFC\u5165\u5BB9\u5668Tar\u5305"}),value:"containerTar"},{label:(0,r.jsx)(Y.Z,{title:"\u4E0A\u4F20\u955C\u50CF Tar \u5305\u6784\u5EFA\u955C\u50CF",children:"\u5BFC\u5165\u955C\u50CFTar\u5305"}),value:"imageTar"}],fieldProps:{onChange:function(x){Fe(x.target.value)}}}),(0,r.jsx)(u.Z,{name:["uploadType"],children:function(x){var i=x.uploadType;if(i=="containerTar")return[(0,r.jsx)(o.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u5DE5\u4F5C\u76EE\u5F55\uFF0C\u4E00\u822C\u6307\u5411\u4EE3\u7801\u7684\u6240\u5728\u76EE\u5F55",label:"\u5DE5\u4F5C\u76EE\u5F55",name:"workDir",placeholder:"\u9ED8\u8BA4\u4E3A / \u76EE\u5F55"},"workDir"),(0,r.jsx)(o.Z,{required:!0,tooltip:"\u901A\u8FC7\u5BB9\u5668\u5BFC\u5165\u955C\u50CF\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u542F\u52A8\u547D\u4EE4\uFF0C\u5426\u5219\u518D\u521B\u5EFA\u65F6\u65E0\u6CD5\u542F\u52A8",rules:[{required:!0}],label:"CMD",name:"cmd"},"cmd"),(0,r.jsx)(z.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u5BF9\u5916\u66B4\u9732\u7684\u7AEF\u53E3\uFF0C\u4E00\u884C\u6307\u5B9A\u4E00\u4E2A\u7AEF\u53E3",label:"\u66B4\u9732\u7AEF\u53E3",name:"expose",placeholder:`80 
9000`},"expose"),(0,r.jsx)(z.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u9700\u8981\u914D\u7F6E\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u4E00\u884C\u6307\u5B9A\u4E00\u4E2A\u73AF\u5883\u53D8\u91CF",label:"\u73AF\u5883\u53D8\u91CF",name:"env",placeholder:`TEST_VALUE=123 
TEST_NO_VALUE=`},"env"),(0,r.jsx)(z.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u9700\u8981\u6301\u4E45\u5316\u7684\u76EE\u5F55\uFF0C\u4E00\u884C\u6307\u5B9A\u4E00\u4E2A\u76EE\u5F55",label:"\u5B58\u50A8\u5377\u76EE\u5F55",name:"volume",placeholder:`/app 
/home`},"volume")];if(i!="imageTar"){if(i=="zip"||i=="git")return(0,r.jsx)(o.Z,{name:"buildRoot",label:"Dockerfile\u6587\u4EF6\u4F4D\u7F6E",tooltip:"\u6307\u5B9ADockerfile\u6240\u5728\u7684\u76EE\u5F55",fieldProps:{addonBefore:"\u9ED8\u8BA4\u4EE5\u5305\u6216\u662F\u4ED3\u5E93\u76EE\u5F55\u5F00\u59CB\uFF08/\uFF09"},placeholder:"/Dockerfile"})}}}),S=="zip"&&(0,r.jsx)(M.Z,{required:!0,label:"\u4E0A\u4F20\u6784\u5EFA\u5305 (\u53EA\u5141\u8BB8\u4E0A\u4F20 .zip \u6587\u4EF6\uFF0C\u4E14\u4E0E\u5305\u4E2D\u7684 Dockerfile \u6307\u5B9A\u7684\u76EE\u5F55\u4FDD\u6301\u4E00\u81F4)",name:"buildZip",accept:".zip"}),S=="containerTar"&&(0,r.jsx)(M.Z,{required:!0,label:"\u5BFC\u5165\u5BB9\u5668\u5305\uFF08\u53EA\u5141\u8BB8\u4E0A\u4F20 .tar \u6587\u4EF6\uFF0C\u901A\u8FC7\u5BFC\u51FA\u5BB9\u5668\u751F\u6210\uFF09",name:"containerTar",accept:".tar"}),S=="imageTar"&&(0,r.jsx)(M.Z,{required:!0,label:"\u5BFC\u5165\u955C\u50CF\u5305\uFF08\u53EA\u5141\u8BB8\u4E0A\u4F20 .tar \u6587\u4EF6\uFF0C\u901A\u8FC7\u5BFC\u51FA\u955C\u50CF\u751F\u6210\uFF09",name:"imageTar",accept:".tar"}),S=="git"&&(0,r.jsx)(c,{}),S=="dockerfile"&&(0,r.jsx)(_,{createFormRef:I})]})}),(0,r.jsx)(R.Z,{ref:ue})]})}},97961:function(w,O,e){e.d(O,{GH:function(){return R},MF:function(){return m},_2:function(){return p},fN:function(){return o},ii:function(){return h},vC:function(){return c}});var g=e(15009),n=e.n(g),y=e(99289),d=e.n(y),s=e(82346),h=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function o(u){return r.apply(this,arguments)}function r(){return r=d()(n()().mark(function u(F){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,s.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:F}));case 1:case"end":return l.stop()}},u)})),r.apply(this,arguments)}function c(u){return M.apply(this,arguments)}function M(){return M=d()(n()().mark(function u(F){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,s.request)("/api/app/image/import-by-container-tar",{method:"POST",data:F}));case 1:case"end":return l.stop()}},u)})),M.apply(this,arguments)}function R(u){return v.apply(this,arguments)}function v(){return v=d()(n()().mark(function u(F){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,s.request)("/api/app/image/import-by-image-tar",{method:"POST",data:F}));case 1:case"end":return l.stop()}},u)})),v.apply(this,arguments)}function p(u){return t.apply(this,arguments)}function t(){return t=d()(n()().mark(function u(F){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,s.request)("/api/common/attach/delete",{method:"POST",data:F});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},u)})),t.apply(this,arguments)}function m(){return T.apply(this,arguments)}function T(){return T=d()(n()().mark(function u(){return n()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",(0,s.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return C.stop()}},u)})),T.apply(this,arguments)}},18148:function(w,O,e){e.d(O,{$q:function(){return t},Fj:function(){return A},KG:function(){return h},KX:function(){return P},T8:function(){return v},Xn:function(){return M},ao:function(){return T},c5:function(){return l},c7:function(){return F}});var g=e(15009),n=e.n(g),y=e(99289),d=e.n(y),s=e(82346);function h(f){return o.apply(this,arguments)}function o(){return o=d()(n()().mark(function f(j){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.request)("/api/app/image/get-list",{method:"POST",data:j}));case 1:case"end":return a.stop()}},f)})),o.apply(this,arguments)}function r(f){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime().mark(function f(j){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,request("/api/app/log/image-build",{method:"POST",data:j});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},f)})),c.apply(this,arguments)}function M(f){return R.apply(this,arguments)}function R(){return R=d()(n()().mark(function f(j){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.request)("/api/app/image/get-list-build",{method:"POST",data:j}));case 1:case"end":return a.stop()}},f)})),R.apply(this,arguments)}function v(f){return p.apply(this,arguments)}function p(){return p=d()(n()().mark(function f(j){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.request)("/api/app/image/get-build-task",{method:"POST",data:j});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},f)})),p.apply(this,arguments)}function t(f){return m.apply(this,arguments)}function m(){return m=d()(n()().mark(function f(j){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.request)("/api/app/image/delete-build-task",{method:"POST",data:j});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},f)})),m.apply(this,arguments)}function T(f){return u.apply(this,arguments)}function u(){return u=d()(n()().mark(function f(j){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.request)("/api/app/image/image-delete",{method:"POST",data:j});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},f)})),u.apply(this,arguments)}function F(){return C.apply(this,arguments)}function C(){return C=d()(n()().mark(function f(){return n()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,s.request)("/api/app/image/image-prune",{method:"POST"});case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},f)})),C.apply(this,arguments)}function l(){return B.apply(this,arguments)}function B(){return B=d()(n()().mark(function f(){return n()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,s.request)("/api/app/image/build-prune",{method:"POST"});case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},f)})),B.apply(this,arguments)}function A(f){return _.apply(this,arguments)}function _(){return _=d()(n()().mark(function f(j){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.request)("/api/app/image/update-title",{method:"POST",data:j});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},f)})),_.apply(this,arguments)}function P(f){return E.apply(this,arguments)}function E(){return E=d()(n()().mark(function f(j){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.request)("/api/app/image/tag-sync",{method:"POST",data:j}));case 1:case"end":return a.stop()}},f)})),E.apply(this,arguments)}},75870:function(w,O,e){e.d(O,{Ot:function(){return h},ZH:function(){return r},ix:function(){return M},t1:function(){return v}});var g=e(15009),n=e.n(g),y=e(99289),d=e.n(y),s=e(82346);function h(t){return o.apply(this,arguments)}function o(){return o=d()(n()().mark(function t(m){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,s.request)("/api/common/registry/get-list",{method:"POST",data:m}));case 1:case"end":return u.stop()}},t)})),o.apply(this,arguments)}function r(t){return c.apply(this,arguments)}function c(){return c=d()(n()().mark(function t(m){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,s.request)("/api/common/registry/create",{method:"POST",data:m}));case 1:case"end":return u.stop()}},t)})),c.apply(this,arguments)}function M(t){return R.apply(this,arguments)}function R(){return R=d()(n()().mark(function t(m){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,s.request)("/api/common/registry/delete",{method:"POST",data:m}));case 1:case"end":return u.stop()}},t)})),R.apply(this,arguments)}function v(t){return p.apply(this,arguments)}function p(){return p=d()(n()().mark(function t(m){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,s.request)("/api/common/registry/get-detail",{method:"POST",data:m}));case 1:case"end":return u.stop()}},t)})),p.apply(this,arguments)}}}]);
