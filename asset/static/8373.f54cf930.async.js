"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8373],{91058:function(N,B,t){var W=t(19632),a=t.n(W),A=t(97857),s=t.n(A),l=t(5574),f=t.n(l),v=t(89035),O=t(64317),d=t(5966),g=t(38345),y=t(17186),S=t(24739),K=t(42075),M=t(28036),x=t(85576),T=t(67294),k=t(95089),L=t(12491),C=t(62597),j=t(79245),_=t(85893),I="docker-image",b=(0,T.forwardRef)(function(i,R){var Y=(0,T.useState)(I),F=f()(Y,2),V=F[0],w=F[1],E=(0,T.useRef)(),$=(0,T.useState)(""),H=f()($,2),G=H[0],r=H[1],n=function(){V!="code"?w("code"):w(I)};(0,T.useImperativeHandle)(R,function(){return{addEnvItem:function(u,p){var h,c=(h=E.current)===null||h===void 0?void 0:h.getList(),D=!1;if(c==null||c.map(function(U){if(U.name==u){D=!0;return}}),!D){var P;(P=E.current)===null||P===void 0||P.add({name:u,value:p})}},clear:function(){var u;(u=E.current)===null||u===void 0||(u=u.getList())===null||u===void 0||u.map(function(p,h){var c;(c=E.current)===null||c===void 0||c.remove(h)})}}});function m(o){try{var u,p;o==""&&(o=e());for(var h=(u=(p=E.current)===null||p===void 0||(p=p.getList())===null||p===void 0?void 0:p.length)!==null&&u!==void 0?u:0,c=h;c>=0;c--){var D;(D=E.current)===null||D===void 0||D.remove(c)}var P=o.split(`
`),U=0;P.map(function(Z){var z,J=Z.split("=");J.length<2||((z=E.current)===null||z===void 0||z.add({name:J[0],value:J.slice(1).join("=")},U),U++)})}catch(Z){console.log(Z)}}function e(){if(E&&E.current&&E.current.getList){var o,u=(o=E.current)===null||o===void 0?void 0:o.getList();if(u){var p=[];return u.map(function(h){p.push("".concat(h.name,"=").concat(h.value))}),p.join(`
`)}else return""}else return""}function Q(o){var u,p,h,c,D={},P={help:o&&o.label?o.label:"",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:i.requireValue?!0:(0,j.y)((u=o.rule)===null||u===void 0?void 0:u.kind,C.fp.EnvValueRuleRequired)}],disabled:i.showDisableValue||(0,j.y)((p=o.rule)===null||p===void 0?void 0:p.kind,C.fp.EnvValueRuleDisabled)};if((0,j.y)((h=o.rule)===null||h===void 0?void 0:h.kind,C.fp.EnvValueTypeSelect)){var U;return(0,_.jsx)(O.Z,s()(s()({fieldProps:D},P),{},{width:i.showInDrawer?"sm":"md",options:((U=o.rule)===null||U===void 0?void 0:U.option)&&o.rule.option.map(function(Z){return{label:Z.name,value:Z.value}}),initialValue:o.value}))}else return(0,j.y)((c=o.rule)===null||c===void 0?void 0:c.kind,C.fp.EnvValueTypeNumber)?(0,_.jsx)(d.Z,s()(s()({fieldProps:D},P),{},{width:i.showInDrawer?"sm":"md",rules:[].concat(a()(P.rules),[{pattern:new RegExp("^[0-9]*$")}]),help:P.help+",\u6570\u503C\u7C7B\u578B"})):(0,_.jsx)(d.Z,s()(s()({fieldProps:D},P),{},{width:i.showInDrawer?"sm":"md"}))}return(0,_.jsxs)(g.Z,{ghost:i.showCardGhost,title:i.label?i.label:null,headerBordered:!0,extra:(i.showCodeMode||i.showImportButton)&&(0,_.jsxs)(K.Z,{children:[i.showImportButton&&(0,_.jsx)("div",{style:{marginBottom:"-25px"},children:(0,_.jsx)(L.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(u){return m(u),!0},onLoad:function(u){if(u.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),i.showCodeMode?(0,_.jsx)(M.ZP,{icon:(0,_.jsx)(v.Z,{}),type:V=="code"?"primary":"default",onClick:n,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,_.jsx)(y.u,{name:i.name?i.name:"environment",actionRef:E,creatorButtonProps:i.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,deleteIconProps:i.showDeleteButton,min:100,label:i.listLabel,children:function(u,p,h){var c=h.getCurrentRowData();return(0,_.jsxs)(S.UW,{style:{marginBottom:"5px"},children:[(0,_.jsx)(d.Z,{width:i.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:i.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),Q(c)]})}}),i.showCodeMode&&(0,_.jsx)(x.Z,{width:"800px",open:V=="code",onCancel:function(){return w("docker-image")},onOk:function(){m(G),w("docker-image")},children:(0,_.jsx)(k.ZP,{onChange:function(u){return r(u)},value:e(),height:"680px",theme:"light"})})]})});B.Z=b},12491:function(N,B,t){t.d(B,{Z:function(){return O}});var W=t(24963),a=t(88484),A=t(62370),s=t(31418),l=t(28036),f=t(67294),v=t(85893);function O(d){var g=(0,f.useContext)(W.Z),y=g.message,S=g.notice,K=g.lang,M=(0,f.useRef)(null),x=s.Z.useApp(),T=function(){M.current&&(M.current.click(),M.current.onchange=function(L){if(!L||!L.target)return"";var C=new FileReader;C.onload=function(_){var I,b,i=(I=_.target)===null||I===void 0?void 0:I.result;if(d.onLoad)try{d.onLoad&&d.onLoad(i)}catch(R){S.error(R);return}typeof d.onImport=="function"&&(y.success("\u6210\u529F\u5BFC\u5165 ".concat(d.title)),d.onImport(i)),(b=M.current)!==null&&b!==void 0&&b.value&&(M.current.value="")};var j=L.target;if(j.files)try{C.readAsText(j.files[0])}catch(_){S.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(A.Z,{children:(0,v.jsx)(l.ZP,{icon:(0,v.jsx)(a.Z,{}),block:!0,onClick:T,children:d.title})}),(0,v.jsx)("input",{style:{display:"none"},type:"file",ref:M,name:"importFileInput"})]})}},90098:function(N,B,t){t.d(B,{GG:function(){return L},MG:function(){return Y},Oh:function(){return M},Pn:function(){return g},U_:function(){return i},Yz:function(){return j},iE:function(){return E},ik:function(){return S},im:function(){return f},mg:function(){return T},pm:function(){return O},tw:function(){return H},vf:function(){return I},xC:function(){return V}});var W=t(15009),a=t.n(W),A=t(99289),s=t.n(A),l=t(82346);function f(r){return v.apply(this,arguments)}function v(){return v=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/compose/create",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function O(r){return d.apply(this,arguments)}function d(){return d=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/compose/get-list",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),d.apply(this,arguments)}function g(r){return y.apply(this,arguments)}function y(){return y=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,l.request)("/api/app/compose/get-task",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),y.apply(this,arguments)}function S(r){return K.apply(this,arguments)}function K(){return K=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/compose/delete",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),K.apply(this,arguments)}function M(r){return x.apply(this,arguments)}function x(){return x=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,l.request)("/api/app/compose/container-deploy",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),x.apply(this,arguments)}function T(r){return k.apply(this,arguments)}function k(){return k=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,l.request)("/api/app/compose/container-destroy",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),k.apply(this,arguments)}function L(r){return C.apply(this,arguments)}function C(){return C=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,l.request)("/api/app/compose/container-ctrl",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),C.apply(this,arguments)}function j(r){return _.apply(this,arguments)}function _(){return _=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,l.request)("/api/app/compose/container-log",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),_.apply(this,arguments)}function I(r){return b.apply(this,arguments)}function b(){return b=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.download=!0,n.id=String(n.id),e.next=4,(0,l.request)("/api/app/compose/container-log",{method:"POST",data:n,responseType:"blob"});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},r)})),b.apply(this,arguments)}function i(r){return R.apply(this,arguments)}function R(){return R=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/compose/container-process-kill",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),R.apply(this,arguments)}function Y(r){return F.apply(this,arguments)}function F(){return F=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/compose/get-from-uri",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),F.apply(this,arguments)}function V(r){return w.apply(this,arguments)}function w(){return w=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,l.request)("/api/app/compose/parse",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),w.apply(this,arguments)}function E(r){return $.apply(this,arguments)}function $(){return $=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/common/store/deploy",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),$.apply(this,arguments)}function H(r){return G.apply(this,arguments)}function G(){return G=s()(a()().mark(function r(n){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,l.request)("/api/app/compose/download",{method:"POST",data:n,responseType:"blob"}));case 2:case"end":return e.stop()}},r)})),G.apply(this,arguments)}},79245:function(N,B,t){t.d(B,{m:function(){return A},y:function(){return s}});var W=t(64599),a=t.n(W);function A(l){var f=[];if(!l||l=="")return f;var v=l.matchAll(/\$\{(\w+)[:-?=]*(.*?)\}/g),O=a()(v),d;try{for(O.s();!(d=O.n()).done;){var g=d.value;f.push({name:g[1],value:g[2]?g[2].indexOf("-")==0?g[2].substring(1):g[2]:""})}}catch(y){O.e(y)}finally{O.f()}return f}function s(l,f){return!l||!f?!1:(l&f)!==0}}}]);
