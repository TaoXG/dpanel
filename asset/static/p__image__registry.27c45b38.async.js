"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9013],{52688:function(W,E,e){var m=e(1413),n=e(45987),d=e(67294),_=e(35510),v=e(85893),C=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],P=d.forwardRef(function(f,c){var t=f.fieldProps,p=f.unCheckedChildren,A=f.checkedChildren,h=f.proFieldProps,s=(0,n.Z)(f,C);return(0,v.jsx)(_.Z,(0,m.Z)({valueType:"switch",fieldProps:(0,m.Z)({unCheckedChildren:p,checkedChildren:A},t),ref:c,valuePropName:"checked",proFieldProps:h,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},s))});E.Z=P},5966:function(W,E,e){var m=e(97685),n=e(1413),d=e(45987),_=e(21770),v=e(99859),C=e(55241),P=e(97435),f=e(67294),c=e(35510),t=e(85893),p=["fieldProps","proFieldProps"],A=["fieldProps","proFieldProps"],h="text",s=function(o){var u=o.fieldProps,T=o.proFieldProps,g=(0,d.Z)(o,p);return(0,t.jsx)(c.Z,(0,n.Z)({valueType:h,fieldProps:u,filedConfig:{valueType:h},proFieldProps:T},g))},l=function(o){var u=(0,_.Z)(o.open||!1,{value:o.open,onChange:o.onOpenChange}),T=(0,m.Z)(u,2),g=T[0],M=T[1];return(0,t.jsx)(v.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function($){var S,D=$.getFieldValue(o.name||[]);return(0,t.jsx)(C.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(i){return i&&i.parentNode?i.parentNode:i},onOpenChange:function(i){return M(i)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(S=o.statusRender)===null||S===void 0?void 0:S.call(o,D),o.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:o.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},o.popoverProps),{},{open:g,children:o.children}))}})},r=function(o){var u=o.fieldProps,T=o.proFieldProps,g=(0,d.Z)(o,A),M=(0,f.useState)(!1),L=(0,m.Z)(M,2),$=L[0],S=L[1];return u!=null&&u.statusRender&&g.name?(0,t.jsx)(l,{name:g.name,statusRender:u==null?void 0:u.statusRender,popoverProps:u==null?void 0:u.popoverProps,strengthText:u==null?void 0:u.strengthText,open:$,onOpenChange:S,children:(0,t.jsx)("div",{children:(0,t.jsx)(c.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,P.Z)(u,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(Z){var i;u==null||(i=u.onBlur)===null||i===void 0||i.call(u,Z),S(!1)},onClick:function(Z){var i;u==null||(i=u.onClick)===null||i===void 0||i.call(u,Z),S(!0)}}),proFieldProps:T,filedConfig:{valueType:h}},g))})}):(0,t.jsx)(c.Z,(0,n.Z)({valueType:"password",fieldProps:u,proFieldProps:T,filedConfig:{valueType:h}},g))},a=s;a.Password=r,a.displayName="ProFormComponent",E.Z=a},90672:function(W,E,e){var m=e(1413),n=e(45987),d=e(67294),_=e(35510),v=e(85893),C=["fieldProps","proFieldProps"],P=function(c,t){var p=c.fieldProps,A=c.proFieldProps,h=(0,n.Z)(c,C);return(0,v.jsx)(_.Z,(0,m.Z)({ref:t,valueType:"textarea",fieldProps:p,proFieldProps:A},h))};E.Z=d.forwardRef(P)},80821:function(W,E,e){e.d(E,{Z:function(){return c}});var m=e(5574),n=e.n(m),d=e(24963),_=e(86738),v=e(28036),C=e(83062),P=e(67294),f=e(85893);function c(t){var p=(0,P.useState)(!1),A=n()(p,2),h=A[0],s=A[1],l=(0,P.useContext)(d.Z),r=l.lang,a=l.notice,b=l.message,o=function(){s(!0);var T=t.action();T instanceof Promise?T.then(function(g){if(s(!1),g){typeof t.onSuccess=="function"&&t.onSuccess(g);var M="";t.messageSuccess?typeof t.messageSuccess=="function"?M=t.messageSuccess(g):M=t.messageSuccess.indexOf("notification.")==0?r(t.messageSuccess):t.messageSuccess:M=r("notification.finish"),t.asynced?b.info(M):b.success(M)}}).catch(function(g){s(!1),typeof t.onError=="function"&&t.onError(g)}):s(!1)};return t.confirm?(0,f.jsx)(_.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:r("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?r(t.confirm):t.confirm,onConfirm:o,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,f.jsx)(v.ZP,{block:t.block,disabled:t.disabled,icon:t.icon,loading:h,danger:t.danger,type:t.type,children:t.children})}):(0,f.jsx)(C.Z,{title:t.tips,children:(0,f.jsx)(v.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto"}:{},disabled:t.disabled,icon:t.icon,loading:h,onClick:o,danger:t.danger,type:t.type,children:t.children})})}},24963:function(W,E,e){var m=e(67294),n=(0,m.createContext)({});E.Z=n},24396:function(W,E,e){e.r(E),e.d(E,{default:function(){return S}});var m=e(15009),n=e.n(m),d=e(99289),_=e.n(d),v=e(80821),C=e(5574),P=e.n(C),f=e(24963),c=e(75870),t=e(184),p=e(5966),A=e(52688),h=e(90672),s=e(28036),l=e(67294),r=e(85893),a=(0,l.forwardRef)(function(D,Z){var i=(0,l.useState)(!1),j=P()(i,2),y=j[0],I=j[1],O=(0,l.useRef)(),F=(0,l.useState)(0),H=P()(F,2),R=H[0],V=H[1],J=(0,l.useContext)(f.Z),Q=J.notice,Y=J.message;return(0,l.useImperativeHandle)(Z,function(){return{setEditId:function(B){(0,c.t1)({id:B}).then(function(x){var U;I(!0),V(B),(U=O.current)===null||U===void 0||U.setFieldsValue({title:x.data.info.title,serverAddress:x.data.info.serverAddress,username:x.data.info.setting.username,proxy:x.data.info.setting.proxy.join(`
`),enableHttp:x.data.info.setting.enableHttp})})}}}),(0,r.jsxs)(t.a,{drawerProps:{forceRender:!0},name:"create",title:"\u6DFB\u52A0/\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93",open:y,onOpenChange:function(B){I(B)},layout:"horizontal",labelCol:{span:4,offset:0},formRef:O,trigger:(0,r.jsx)(s.ZP,{type:"primary",onClick:function(){var B;(B=O.current)===null||B===void 0||B.resetFields(),V(0)},children:"\u6DFB\u52A0\u4ED3\u5E93"}),onFinish:function(){var w=_()(n()().mark(function B(x){var U,N,z,G;return n()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,c.ZH)({id:R,title:x.title,serverAddress:x.serverAddress,username:(U=x.username)!==null&&U!==void 0?U:"",password:(N=x.password)!==null&&N!==void 0?N:"",proxy:x.proxy?x.proxy.split(`
`):[],enableHttp:x.enableHttp});case 2:if(z=K.sent,!(z&&z.data&&z.data.id>0)){K.next=8;break}return Y.success("\u6DFB\u52A0\u6216\u662F\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93\u6210\u529F"),D.onFinish&&D.onFinish(),(G=O.current)===null||G===void 0||G.resetFields(),K.abrupt("return",!0);case 8:case"end":return K.stop()}},B)}));return function(B){return w.apply(this,arguments)}}(),children:[(0,r.jsx)(p.Z,{label:"\u540D\u79F0",name:"title",placeholder:"\u6307\u5B9A\u4ED3\u5E93\u4E00\u4E2A\u540D\u79F0",disabled:R==-1,required:!0}),(0,r.jsx)(p.Z,{label:"\u4ED3\u5E93\u5730\u5740",tooltip:"\u4F8B\u5982:ccr.ccs.tencentyun.com\uFF0Cdocker.io\u3002\u5982\u679C\u662F\u672C\u5730\u4ED3\u5E93\u8BF7\u914D\u7F6E\u5B8C\u6574\u94FE\u63A5, \u4F8B\u5982: http://127.0.0.1:5000",name:"serverAddress",placeholder:"\u586B\u5199\u4ED3\u5E93\u5730\u5740\uFF0C\u5B98\u65B9\u9ED8\u8BA4\u7559\u7A7A",disabled:R==-1}),(0,r.jsx)(A.Z,{tooltip:"\u5982\u679C\u4F60\u914D\u7F6E\u7684\u662F\u672C\u5730\u955C\u50CF\u4ED3\u5E93\uFF0C\u8BF7\u5F00\u542F\u6B64\u9009\u9879",label:"\u4F7F\u7528 Http \u534F\u8BAE",name:"enableHttp"}),(0,r.jsx)(p.Z,{label:"\u7528\u6237\u540D",name:"username",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u7528\u6237\u540D",tooltip:""},"username"),(0,r.jsx)(p.Z.Password,{label:"\u5BC6\u7801",name:"password",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u5BC6\u7801,\u4E3A\u7A7A\u65F6\u4F7F\u7528\u65E7\u5BC6\u7801"},"password"),(0,r.jsx)(h.Z,{label:"\u52A0\u901F\u5730\u5740",name:"proxy",fieldProps:{autoSize:{minRows:10}},placeholder:`https://docker.1panel.live 
https://docker.m.daocloud.io`,tooltip:"\u914D\u7F6E\u8BE5\u4ED3\u5E93\u7684\u52A0\u901F\u5730\u5740\uFF0C\u591A\u4E2A\u5730\u5740\u7528\u6362\u884C\u5206\u9694\u3002\u591A\u4E2A\u5730\u5740\u91C7\u7528\u8F6E\u8BAD\u7684\u65B9\u5F0F\u4E0B\u8F7D"})]})}),b=a,o=e(67255),u=e(43425),T=e(90078),g=e(78099),M=e(42075),L=e(96074),$=e(83062);function S(){var D=(0,l.useRef)(),Z=(0,l.useRef)();return(0,r.jsx)(T._z,{header:{extra:[(0,r.jsx)(b,{onFinish:function(){var j,y;!((j=D.current)===null||j===void 0)&&j.reloadAndRest&&((y=D.current)===null||y===void 0||y.reloadAndRest())},ref:Z})]},children:(0,r.jsx)(g.Z,{scroll:{x:"max-content"},rowKey:"id",columns:[{title:"\u540D\u79F0",ellipsis:!0,dataIndex:"title"},{title:"Url",dataIndex:"serverAddress"},{title:"\u7528\u6237",dataIndex:["setting","username"],search:!1},{title:"\u64CD\u4F5C",width:100,search:!1,fixed:"right",render:function(j,y,I,O,F){return(0,r.jsx)(M.Z,{split:(0,r.jsx)(L.Z,{type:"vertical"}),children:(0,r.jsx)(s.ZP,{type:"link",onClick:function(){var R;(R=Z.current)===null||R===void 0||R.setEditId(y.id)},children:(0,r.jsx)($.Z,{title:"\u7BA1\u7406",children:(0,r.jsx)(u.Z,{})})})})}}],request:function(){var i=_()(n()().mark(function j(y,I,O){var F;return n()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,c.Ot)({title:y.title,serverAddress:y.serverAddress});case 2:return F=R.sent,R.abrupt("return",{data:F.data.list,success:!0,total:F.data.list.length});case 4:case"end":return R.stop()}},j)}));return function(j,y,I){return i.apply(this,arguments)}}(),toolBarRender:function(){return[]},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},pagination:(0,o.O)(),actionRef:D,tableAlertOptionRender:function(j){var y=j.selectedRowKeys;return(0,r.jsx)(M.Z,{size:16,children:(0,r.jsx)(v.Z,{danger:!0,type:"primary",action:function(){return(0,c.ix)({id:y})},onSuccess:function(){var O,F;return!((O=D.current)===null||O===void 0)&&O.reloadAndRest&&((F=D.current)===null||F===void 0||F.reloadAndRest()),!0},onError:function(){var O,F;return!((O=D.current)===null||O===void 0)&&O.reset&&((F=D.current)===null||F===void 0||F.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})}})})}},75870:function(W,E,e){e.d(E,{Ot:function(){return C},ZH:function(){return f},ix:function(){return t},t1:function(){return A}});var m=e(15009),n=e.n(m),d=e(99289),_=e.n(d),v=e(82346);function C(s){return P.apply(this,arguments)}function P(){return P=_()(n()().mark(function s(l){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.request)("/api/common/registry/get-list",{method:"POST",data:l}));case 1:case"end":return a.stop()}},s)})),P.apply(this,arguments)}function f(s){return c.apply(this,arguments)}function c(){return c=_()(n()().mark(function s(l){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.request)("/api/common/registry/create",{method:"POST",data:l}));case 1:case"end":return a.stop()}},s)})),c.apply(this,arguments)}function t(s){return p.apply(this,arguments)}function p(){return p=_()(n()().mark(function s(l){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.request)("/api/common/registry/delete",{method:"POST",data:l}));case 1:case"end":return a.stop()}},s)})),p.apply(this,arguments)}function A(s){return h.apply(this,arguments)}function h(){return h=_()(n()().mark(function s(l){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.request)("/api/common/registry/get-detail",{method:"POST",data:l}));case 1:case"end":return a.stop()}},s)})),h.apply(this,arguments)}},67255:function(W,E,e){e.d(E,{O:function(){return m},j:function(){return n}});function m(){var d=localStorage.getItem("dpanel-pagesize");return d=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(d!=null?d:"20")}}function n(d){var _="dpanel-table-column-".concat(d),v={};if(localStorage.getItem(_)){var C;v=JSON.parse((C=localStorage.getItem(_))!==null&&C!==void 0?C:"{}")}return{defaultValue:v,onChange:function(f){localStorage.setItem("dpanel-table-column-".concat(d),JSON.stringify(f))}}}}}]);
