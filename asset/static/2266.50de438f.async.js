"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2266],{28307:function(F,M,r){var R=r(15009),n=r.n(R),B=r(99289),_=r.n(B),i=r(5574),j=r.n(i),E=r(38345),y=r(97269),D=r(62370),c=r(5966),C=r(64317),v=r(28036),P=r(85265),d=r(42075),o=r(67294),p=r(3393),a=r(97961),O=r(92754),f=r(82346),l=r(96042),s=r(85893),K=(0,o.forwardRef)(function(T,w){var A=(0,o.useState)(!1),t=j()(A,2),h=t[0],u=t[1],e=(0,o.useRef)(),W=(0,o.useRef)(),N=(0,o.useState)(!1),Z=j()(N,2),G=Z[0],x=Z[1];return(0,o.useImperativeHandle)(w,function(){return{upgradeImage:function(m){var g;return u(!0),(g=e.current)===null||g===void 0||g.setFieldValue("imageUrl",m),(0,p.Gb)({tag:m,type:"pull"})},setImageName:function(m){var g;u(!0),(g=e.current)===null||g===void 0||g.setFieldValue("imageUrl",m)}}}),[(0,s.jsx)(v.ZP,{type:T.buttonType?T.buttonType:"default",onClick:function(){var m,g;T.onClick&&T.onClick(),u(!0),(m=e.current)===null||m===void 0||m.resetFields(),(g=W.current)===null||g===void 0||g.setStart("")},children:"\u62C9\u53D6\u955C\u50CF"},"remoteBtn"),(0,s.jsxs)(P.Z,{forceRender:!0,open:h,title:"\u62C9\u53D6\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){var m;u(!1),(m=W.current)===null||m===void 0||m.close()},footer:!1,children:[(0,s.jsx)(E.Z,{children:(0,s.jsxs)(d.Z,{direction:"vertical",size:"middle",children:[(0,s.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,s.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5\u5728\u4E0A\u9762",(0,s.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"}),"\u9700\u8981\u7684\u955C\u50CF"]}),(0,s.jsxs)("div",{children:["2\u3001\u955C\u50CF\u4E2D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C\u8BF7\u786E",(0,s.jsx)(f.Link,{to:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8FC7\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u6709 Pull \u6743\u9650"]}),(0,s.jsxs)("div",{children:["3\u3001\u53EF\u5728",(0,s.jsx)(f.Link,{to:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,s.jsx)(E.Z,{title:"\u62C9\u53D6\u955C\u50CF",headerBordered:!0,children:(0,s.jsxs)(y.A,{formRef:e,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var b=_()(n()().mark(function m(g){var U,S,k,$,L,H;return n()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return L=(U=g.imageUrl)!==null&&U!==void 0?U:"",g.registry&&(L=g.registry.serverAddress+"/"+L),x(!0),(S=W.current)===null||S===void 0||S.setStart(L),I.next=6,(0,p.Gb)({tag:L,type:"pull",platform:(k=g.platform)!==null&&k!==void 0?k:""}).finally(function(){x(!1)});case 6:return H=I.sent,($=W.current)===null||$===void 0||$.setFinish(),u(!1),T.onFinish&&T.onFinish(H.data.tag),I.abrupt("return",!0);case 11:case"end":return I.stop()}},m)}));return function(m){return b.apply(this,arguments)}}(),children:[(0,s.jsxs)(d.Z.Compact,{children:[(0,s.jsx)(D.Z,{name:"registry",children:(0,s.jsx)(l.Z,{width:"150px"})}),(0,s.jsx)(c.Z,{disabled:G,width:270,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,s.jsx)(C.Z,{name:"platform",style:{width:100},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:a.ii.map(function(b){return{label:b.name,value:b.name}})}),(0,s.jsx)(v.ZP,{loading:G,onClick:_()(n()().mark(function b(){var m;return n()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:(m=e.current)===null||m===void 0||m.submit();case 1:case"end":return U.stop()}},b)})),children:"\u62C9\u53D6\u955C\u50CF"}),(0,s.jsx)(v.ZP,{danger:!0,onClick:function(){var m;(m=W.current)===null||m===void 0||m.close()},children:"\u4E2D\u6B62\u6267\u884C"})]}),(0,s.jsx)(D.Z,{label:"\u62C9\u53D6\u8FDB\u5EA6",children:(0,s.jsx)(O.Z,{ref:W})})]})})]},"remoteDrawer")]});M.Z=K},96042:function(F,M,r){r.d(M,{Z:function(){return D}});var R=r(97857),n=r.n(R),B=r(5574),_=r.n(B),i=r(75870),j=r(34041),E=r(67294),y=r(85893);function D(c){var C=(0,E.useState)([]),v=_()(C,2),P=v[0],d=v[1];(0,E.useEffect)(function(){(0,i.Ot)().then(function(p){p&&d(p.data.list)})},[]);var o={};return c.multiple&&(o.mode="multiple"),c.top&&(o.placement="topLeft"),(0,y.jsx)(j.Z,n()({popupMatchSelectWidth:!c.width,style:c.width?{width:c.width}:{},onChange:function(a){if(Array.isArray(a)){var O=a.map(function(f){return P[f]});c.onChangeList&&c.onChangeList(O)}else c.onChange&&c.onChange(P[a])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u4ED3\u5E93",options:P.map(function(p,a){return{value:a,label:p.title+"("+p.serverAddress+")"}}),allowClear:!0},o))}},97961:function(F,M,r){r.d(M,{GH:function(){return C},MF:function(){return o},_2:function(){return P},fN:function(){return E},ii:function(){return j},vC:function(){return D}});var R=r(15009),n=r.n(R),B=r(99289),_=r.n(B),i=r(82346),j=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function E(a){return y.apply(this,arguments)}function y(){return y=_()(n()().mark(function a(O){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,i.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:O}));case 1:case"end":return l.stop()}},a)})),y.apply(this,arguments)}function D(a){return c.apply(this,arguments)}function c(){return c=_()(n()().mark(function a(O){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,i.request)("/api/app/image/import-by-container-tar",{method:"POST",data:O}));case 1:case"end":return l.stop()}},a)})),c.apply(this,arguments)}function C(a){return v.apply(this,arguments)}function v(){return v=_()(n()().mark(function a(O){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,i.request)("/api/app/image/import-by-image-tar",{method:"POST",data:O}));case 1:case"end":return l.stop()}},a)})),v.apply(this,arguments)}function P(a){return d.apply(this,arguments)}function d(){return d=_()(n()().mark(function a(O){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,i.request)("/api/common/attach/delete",{method:"POST",data:O});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},a)})),d.apply(this,arguments)}function o(){return p.apply(this,arguments)}function p(){return p=_()(n()().mark(function a(){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,i.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return f.stop()}},a)})),p.apply(this,arguments)}},18148:function(F,M,r){r.d(M,{$q:function(){return d},Fj:function(){return K},KG:function(){return j},KX:function(){return w},T8:function(){return v},Xn:function(){return c},ao:function(){return p},c5:function(){return l},c7:function(){return O}});var R=r(15009),n=r.n(R),B=r(99289),_=r.n(B),i=r(82346);function j(t){return E.apply(this,arguments)}function E(){return E=_()(n()().mark(function t(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/get-list",{method:"POST",data:h}));case 1:case"end":return e.stop()}},t)})),E.apply(this,arguments)}function y(t){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function t(h){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/log/image-build",{method:"POST",data:h});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),D.apply(this,arguments)}function c(t){return C.apply(this,arguments)}function C(){return C=_()(n()().mark(function t(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/get-list-build",{method:"POST",data:h}));case 1:case"end":return e.stop()}},t)})),C.apply(this,arguments)}function v(t){return P.apply(this,arguments)}function P(){return P=_()(n()().mark(function t(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/image/get-build-task",{method:"POST",data:h});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),P.apply(this,arguments)}function d(t){return o.apply(this,arguments)}function o(){return o=_()(n()().mark(function t(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/image/delete-build-task",{method:"POST",data:h});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),o.apply(this,arguments)}function p(t){return a.apply(this,arguments)}function a(){return a=_()(n()().mark(function t(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/image/image-delete",{method:"POST",data:h});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),a.apply(this,arguments)}function O(){return f.apply(this,arguments)}function f(){return f=_()(n()().mark(function t(){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,i.request)("/api/app/image/image-prune",{method:"POST"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},t)})),f.apply(this,arguments)}function l(){return s.apply(this,arguments)}function s(){return s=_()(n()().mark(function t(){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,i.request)("/api/app/image/build-prune",{method:"POST"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},t)})),s.apply(this,arguments)}function K(t){return T.apply(this,arguments)}function T(){return T=_()(n()().mark(function t(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/image/update-title",{method:"POST",data:h});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),T.apply(this,arguments)}function w(t){return A.apply(this,arguments)}function A(){return A=_()(n()().mark(function t(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/tag-sync",{method:"POST",data:h}));case 1:case"end":return e.stop()}},t)})),A.apply(this,arguments)}},75870:function(F,M,r){r.d(M,{Ot:function(){return j},ZH:function(){return y},ix:function(){return c},t1:function(){return v}});var R=r(15009),n=r.n(R),B=r(99289),_=r.n(B),i=r(82346);function j(d){return E.apply(this,arguments)}function E(){return E=_()(n()().mark(function d(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/common/registry/get-list",{method:"POST",data:o}));case 1:case"end":return a.stop()}},d)})),E.apply(this,arguments)}function y(d){return D.apply(this,arguments)}function D(){return D=_()(n()().mark(function d(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/common/registry/create",{method:"POST",data:o}));case 1:case"end":return a.stop()}},d)})),D.apply(this,arguments)}function c(d){return C.apply(this,arguments)}function C(){return C=_()(n()().mark(function d(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/common/registry/delete",{method:"POST",data:o}));case 1:case"end":return a.stop()}},d)})),C.apply(this,arguments)}function v(d){return P.apply(this,arguments)}function P(){return P=_()(n()().mark(function d(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/common/registry/get-detail",{method:"POST",data:o}));case 1:case"end":return a.stop()}},d)})),P.apply(this,arguments)}}}]);
