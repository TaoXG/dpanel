"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{80821:function(ee,M,n){n.d(M,{Z:function(){return o}});var K=n(5574),b=n.n(K),k=n(24963),d=n(86738),S=n(28036),y=n(83062),_=n(67294),I=n(85893);function o(t){var L=(0,_.useState)(!1),$=b()(L,2),G=$[0],E=$[1],W=(0,_.useContext)(k.Z),T=W.lang,l=W.notice,j=W.message,P=function(){E(!0);var R=t.action();R instanceof Promise?R.then(function(J){if(E(!1),J){typeof t.onSuccess=="function"&&t.onSuccess(J);var V="";t.messageSuccess?typeof t.messageSuccess=="function"?V=t.messageSuccess(J):V=t.messageSuccess.indexOf("notification.")==0?T(t.messageSuccess):t.messageSuccess:V=T("notification.finish"),t.asynced?j.info(V):j.success(V)}}).catch(function(J){E(!1),typeof t.onError=="function"&&t.onError(J)}):E(!1)};return t.confirm?(0,I.jsx)(d.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:T("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?T(t.confirm):t.confirm,onConfirm:P,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,I.jsx)(S.ZP,{block:t.block,disabled:t.disabled,icon:t.icon,loading:G,danger:t.danger,type:t.type,children:t.children})}):(0,I.jsx)(y.Z,{title:t.tips,children:(0,I.jsx)(S.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto"}:{},disabled:t.disabled,icon:t.icon,loading:G,onClick:P,danger:t.danger,type:t.type,children:t.children})})}},44349:function(ee,M,n){var K=n(97857),b=n.n(K),k=n(17186),d=n(5966),S=n(86250),y=n(67294),_=n(85893),I=(0,y.forwardRef)(function(o,t){var L=(0,y.useRef)();(0,y.useImperativeHandle)(t,function(){return{addItem:function(E,W){var T,l=(T=L.current)===null||T===void 0?void 0:T.getList(),j=!1;if(l==null||l.map(function(f){if(f.name==E){j=!0;return}}),!j){var P;(P=L.current)===null||P===void 0||P.add({name:E,value:W})}},clear:function(){var E;(E=L.current)===null||E===void 0||(E=E.getList())===null||E===void 0||E.map(function(W,T){var l;(l=L.current)===null||l===void 0||l.remove(T)})}}});var $={};return o.hideCopyButton===!0&&($.copyIconProps=!1),o.hideDeleteButton===!0&&($.deleteIconProps=!1),(0,_.jsx)(k.u,b()(b()({initialValue:o.initialValue,label:o.label,name:o.name,actionRef:L,creatorButtonProps:o.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(o.label?o.label:o.name)}:!1,min:o.min?o.min:0},$),{},{children:function(E,W,T){return(0,_.jsx)(S.Z,{justify:o.justify,gap:o.gap,children:o.items.map(function(l){return l.render?(0,_.jsx)("div",{children:l.render&&l.render(E,W,T)},"".concat(o.name,"-").concat(l.name,"-").concat(E.key)):(0,_.jsx)(d.Z,{width:l.width,name:l.name,label:l.label,required:l.required,rules:[{required:l.required}],disabled:l.disabled,placeholder:l.placeholder},"".concat(o.name,"-").concat(l.name,"-").concat(E.key))})})}}))});M.Z=I},34879:function(ee,M,n){n.d(M,{Z:function(){return d}});var K=n(97961),b=n(1677),k=n(85893);function d(S){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(b.Z,{max:1,title:S.title,label:S.label,required:S.required,rules:[{required:S.required}],fieldProps:{name:"file",accept:S.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(_){return new Promise(function(I){var o;(0,K._2)({path:(o=_.response.data.path)!==null&&o!==void 0?o:""}).then(function(t){I(!0)})})}},name:S.name})})}},24963:function(ee,M,n){var K=n(67294),b=(0,K.createContext)({});M.Z=b},91518:function(ee,M,n){n.r(M),n.d(M,{default:function(){return Ie}});var K=n(5574),b=n.n(K),k=n(15009),d=n.n(k),S=n(99289),y=n.n(S),_=n(24963),I=n(87662),o=n(82346);function t(C){return L.apply(this,arguments)}function L(){return L=y()(d()().mark(function C(p){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/api/pro/two-fa/enable",{method:"POST",data:p}));case 1:case"end":return r.stop()}},C)})),L.apply(this,arguments)}function $(){return G.apply(this,arguments)}function G(){return G=y()(d()().mark(function C(){return d()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,o.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return F.stop()}},C)})),G.apply(this,arguments)}var E=n(87547),W=n(86548),T=n(97937),l=n(12119),j=n(38345),P=n(97269),f=n(97462),R=n(5966),J=n(52688),V=n(62370),re=n(28036),de=n(35930),A=n(67294),e=n(85893);function ce(){var C=(0,A.useRef)(),p=(0,o.useModel)("@@initialState"),F=p.initialState,r=p.loading,q=p.error,H=p.refresh,v=p.setInitialState,Z=(0,A.useContext)(_.Z),x=Z.message,O=Z.notice,w=Z.lang,D=(0,A.useRef)(),z=(0,A.useState)(0),i=b()(z,2),u=i[0],m=i[1],h=(0,o.useAccess)();return(0,A.useEffect)(function(){$().then(function(a){var c;(c=D.current)===null||c===void 0||c.setFieldsValue({enable:a.data.enable,email:a.data.email,qrcode:a.data.qrcode})})},[u]),(0,e.jsxs)(j.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(j.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(E.Z,{}),subTitle:"\u7BA1\u7406\u5458",children:(0,e.jsxs)(P.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:C,onFinish:function(){var a=y()(d()().mark(function c(s){var g,B;return d()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,I.Jn)({username:s.username,password:s.password,newPassword:s.newPassword});case 2:if(g=U.sent,!(g&&g.data)){U.next=9;break}return(B=C.current)===null||B===void 0||B.resetFields(),x.success("\u4FEE\u6539\u7BA1\u7406\u5458\u7528\u6237\u540D\u548C\u5BC6\u7801\u6210\u529F"),localStorage.removeItem("token"),H(),U.abrupt("return",!0);case 9:case"end":return U.stop()}},c)}));return function(c){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(f.Z,{name:["enableUsername"],children:function(c){var s=c.enableUsername;return(0,e.jsx)(R.Z,{label:"\u7528\u6237\u540D",name:"username",style:{width:"80%"},initialValue:F==null?void 0:F.user.username,disabled:!s,addonAfter:[(0,e.jsx)(re.ZP,{type:"link",hidden:!!s,icon:(0,e.jsx)(W.Z,{}),onClick:function(){var B;(B=C.current)===null||B===void 0||B.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(re.ZP,{type:"link",hidden:!s,icon:(0,e.jsx)(T.Z,{}),onClick:function(){var B;(B=C.current)===null||B===void 0||B.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(R.Z.Password,{label:"\u5F53\u524D\u5BC6\u7801",name:"password",placeholder:"\u8F93\u5165\u7BA1\u7406\u5458\u5F53\u524D\u5BC6\u7801",rules:[{required:!0}]},"password"),(0,e.jsx)(R.Z.Password,{label:"\u65B0\u5BC6\u7801",name:"newPassword"},"newPasword"),(0,e.jsx)(f.Z,{name:["newPassword"],children:function(c){var s=c.newPassword;return(0,e.jsx)(R.Z.Password,{label:"\u786E\u8BA4\u65B0\u5BC6\u7801",name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof s!="undefined"&&s!=""},function(g){var B=g.getFieldValue;return{validator:function(U,oe){return!oe||B("newPassword")===oe?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"newPasword2")}})]})}),h.canSeeTwoFa&&(0,e.jsx)(j.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(l.Z,{}),subTitle:"\u767B\u5F55\u53CC\u56E0\u7D20\u914D\u7F6E",children:(0,e.jsxs)(P.A,{onFinish:function(){var a=y()(d()().mark(function c(s){var g,B;return d()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,t({email:s.email,enable:s.enable});case 2:g=U.sent,g&&g.data.qrcode&&((B=D.current)===null||B===void 0||B.setFieldValue("qrcode",g.data.qrcode)),m(u+1);case 5:case"end":return U.stop()}},c)}));return function(c){return a.apply(this,arguments)}}(),formRef:D,layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},children:[(0,e.jsx)(J.Z,{label:"\u5F00\u542F",name:"enable"}),(0,e.jsx)(R.Z,{label:"\u90AE\u7BB1",name:"email",placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u90AE\u7BB1",rules:[{required:!0},{type:"email"}]}),(0,e.jsx)(V.Z,{name:"qrcode",hidden:!0}),(0,e.jsx)(f.Z,{name:["qrcode"],children:function(c){var s=c.qrcode;if(s)return(0,e.jsx)(V.Z,{label:"\u7ED1\u5B9A\u4E8C\u7EF4\u7801",tooltip:"\u4F7F\u7528\u652F\u6301 2fa \u7684\u9A8C\u8BC1 App \u626B\u7801\u8BE5\u4E8C\u7EF4\u7801",children:(0,e.jsx)(de.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(s)})})}})]})})]})}var me=n(43215);function fe(){var C=(0,A.useRef)(),p=(0,A.useContext)(_.Z),F=p.message,r=p.notice,q=p.lang,H=function(){var v=y()(d()().mark(function Z(){var x,O,w,D;return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,I.pe)({groupName:"setting",name:"server"});case 2:w=i.sent,(x=C.current)===null||x===void 0||x.setFieldsValue({serverIp:(O=w.data.setting.value.serverIp)!==null&&O!==void 0?O:""}),w.data.setting.value.requestTimeout&&((D=C.current)===null||D===void 0||D.setFieldsValue({requestTimeout:w.data.setting.value.requestTimeout}));case 5:case"end":return i.stop()}},Z)}));return function(){return v.apply(this,arguments)}}();return(0,e.jsx)(j.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(j.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(me.Z,{}),subTitle:"\u670D\u52A1\u5668\u5730\u5740",children:(0,e.jsx)(P.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:C,onInit:y()(d()().mark(function v(){return d()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return H(),x.abrupt("return",!0);case 2:case"end":return x.stop()}},v)})),onFinish:function(){var v=y()(d()().mark(function Z(x){var O,w,D;return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return w={groupName:"setting",name:"server",value:{serverIp:x.serverIp}},x.requestTimeout&&(w.value.requestTimeout=x.requestTimeout),i.next=4,(0,I.KU)(w);case 4:return D=i.sent,(O=C.current)===null||O===void 0||O.resetFields(),H(),F.success("\u4FEE\u6539\u670D\u52A1\u5668\u914D\u7F6E\u6210\u529F"),i.abrupt("return",!0);case 9:case"end":return i.stop()}},Z)}));return function(Z){return v.apply(this,arguments)}}(),children:(0,e.jsx)(R.Z,{tooltip:"\u8BBE\u7F6E\u5BBF\u4E3B\u673A\u7684Ip\u6216\u662F\u57DF\u540D\uFF0C\u7528\u4E8E\u901A\u8FC7\u7AEF\u53E3\u7684\u5F62\u5F0F\u8BBF\u95EE\u5BB9\u5668\u3002\u652F\u6301IpV4\u53CAIpV6",label:"\u5BB9\u5668\u7AEF\u53E3\u8BBF\u95EE\u5730\u5740",name:"serverIp",placeholder:"\u4F8B\u5982:192.168.1.25\u30012001:db8:1::2\u3001example.com"})})})})}var he={xs:6,sm:6,md:6,lg:3,xl:3,xxl:3,offset:0},le=n(43425),ne=n(86615),ge=n(64317),ie=n(42075),se=n(86125),ve=n(184),N=n(24739),pe=n(25054),te=n(31199),be=n(90672),Ee=n(51663),xe=n(9361),je=n(21532),Ce=n(86250),ue=n(34879),Fe=n(44349),ae=n(65451),Q=function(p){return(0,e.jsx)(V.Z,{name:p.name,label:p.label,tooltip:p.tooltip,children:(0,e.jsx)(Ee.Z,{showText:function(r){return r.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})})},X={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},Be=["borderRadius","wireframe"],Pe=(0,A.forwardRef)(function(C,p){(0,A.useImperativeHandle)(p,function(){return{show:function(){H(!0)},reset:function(){var i;(i=v.current)===null||i===void 0||i.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var F=(0,A.useState)(!1),r=b()(F,2),q=r[0],H=r[1],v=(0,A.useRef)(),Z=(0,A.useContext)(_.Z),x=Z.message,O=Z.lang,w=xe.Z.useToken(),D=w.token;return(0,e.jsx)(je.ZP,{children:(0,e.jsxs)(ve.a,{drawerProps:{forceRender:!0},submitter:{render:function(i,u){return(0,e.jsx)(ie.Z,{children:u[1]})}},title:"\u81EA\u5B9A\u4E49\u4E3B\u9898",formRef:v,open:q,onOpenChange:function(i){var u;(u=v.current)===null||u===void 0||u.resetFields(["bgImageUpload","siteLogoUpload"]),i&&((0,ae.Py)().then(function(m){var h=m.data.config;if(h){var a;if((a=v.current)===null||a===void 0||a.setFieldsValue({siteLogo:h.siteLogo,siteTitle:h.siteTitle,siteCopyright:h.siteCopyright,siteLink:h.siteLink,bgImage:h.bgImage,loginLogo:h.loginLogo}),!h.bgImage||!h.bgImage.width||h.bgImage.width=="100%"){var c;(c=v.current)===null||c===void 0||c.setFieldValue("bgSize","full")}else{var s;(s=v.current)===null||s===void 0||s.setFieldValue("bgSize","default")}}}),Object.keys(X).map(function(m){var h=m;X[m]!=""&&(h=X[m]),v!=null&&v.current&&(v==null||v.current.setFieldValue(m,D[h]))})),H(i)},name:"theme-user",onFinish:function(){var z=y()(d()().mark(function i(u){var m,h,a;return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a={token:{},bgImage:u.bgImage,siteLink:u.siteLink,siteTitle:(m=u.siteTitle)!==null&&m!==void 0?m:"",siteCopyright:u.siteCopyright,siteLogo:(h=u.siteLogo)!==null&&h!==void 0?h:"",loginLogo:u.loginLogo},u.siteLogoUpload&&u.siteLogoUpload.length>0&&(a.siteLogo=u.siteLogoUpload[0].response.data.path),a.bgImage||(a.bgImage={}),u.bgImageUpload&&u.bgImageUpload.length>0&&(a.bgImage.src=u.bgImageUpload[0].response.data.path),a.bgImage.width=u.bgSize=="full"?"100%":"",u.loginLogoUpload&&u.loginLogoUpload.length>0&&(a.loginLogo=u.loginLogoUpload[0].response.data.path),Object.keys(X).map(function(g){a.token||(a.token={});var B=g;X[g]!=""&&(B=X[g]);var Y=v.current&&v.current.getFieldValue(B);Y&&Y.toHexString?Y.cleared||(a.token[g]=Y.toHexString()):a.token[g]=Y}),Be.map(function(g){a.token||(a.token={});var B=v.current&&v.current.getFieldValue(g);a.token[g]=B}),s.next=10,(0,ae.Z8)(a);case 10:return C.onFinish&&C.onFinish(),x.success(O("notification.finishTheme")),s.abrupt("return",!0);case 13:case"end":return s.stop()}},i)}));return function(i){return z.apply(this,arguments)}}(),children:[(0,e.jsx)(N.UW,{title:"\u76AE\u80A4\u8272\u7CFB",children:Q({name:"colorPrimary",label:"\u54C1\u724C\u8272",tooltip:"\u54C1\u724C\u8272\u662F\u4F53\u73B0\u4EA7\u54C1\u7279\u6027\u548C\u4F20\u64AD\u7406\u5FF5\u6700\u76F4\u89C2\u7684\u89C6\u89C9\u5143\u7D20\u4E4B\u4E00\u3002\u5728\u4F60\u5B8C\u6210\u54C1\u724C\u4E3B\u8272\u7684\u9009\u53D6\u4E4B\u540E\uFF0C\u4F1A\u81EA\u52A8\u5E2E\u4F60\u751F\u6210\u4E00\u5957\u5B8C\u6574\u7684\u8272\u677F\uFF0C\u5E76\u8D4B\u4E88\u5B83\u4EEC\u6709\u6548\u7684\u8BBE\u8BA1\u8BED\u4E49"})}),(0,e.jsxs)(N.UW,{children:[Q({name:"colorBgContainer",label:"\u4E3B\u7A97\u53E3\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"}),Q({name:"colorBgElevated",label:"\u5F39\u51FA\u7A97\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"})]}),(0,e.jsxs)(N.UW,{children:[Q({name:"colorTextBase",label:"\u57FA\u7840\u6587\u672C"}),Q({name:"colorLink",label:"\u94FE\u63A5\u6587\u672C"}),Q({name:"colorBorder",label:"\u8FB9\u6846\u8272"})]}),(0,e.jsx)(N.UW,{title:"\u98CE\u683C",children:(0,e.jsxs)(Ce.Z,{gap:40,children:[(0,e.jsx)(J.Z,{label:"\u7EBF\u6846\u5316",name:"wireframe",initialValue:!1}),(0,e.jsx)(pe.Z,{min:1,max:16,label:"\u5706\u89D2",initialValue:6,name:"borderRadius"})]})}),(0,e.jsx)(N.UW,{title:"\u9762\u677F"}),(0,e.jsx)(R.Z,{label:"\u6807\u9898",name:"siteTitle",placeholder:"\u5C55\u793A\u5728\u9762\u677F\u5DE6\u4E0A\u89D2\u53CA\u9875\u9762\u6807\u7B7E\uFF0C\u4E3A\u7A7A\u5219\u4E0D\u663E\u793A"}),(0,e.jsxs)(N.UW,{children:[(0,e.jsx)(ue.Z,{label:"Logo",title:"\u4E0A\u4F20 Logo",name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(R.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"siteLogo"})]}),(0,e.jsxs)(N.UW,{children:[(0,e.jsx)(ue.Z,{label:"\u80CC\u666F\u56FE",title:"\u4E0A\u4F20\u80CC\u666F\u56FE",name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(R.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:["bgImage","src"]}),(0,e.jsx)(ne.Z.Group,{name:"bgSize",label:"\u5C3A\u5BF8",initialValue:"full",valueEnum:{full:"\u5168\u5C4F",default:"\u9ED8\u8BA4"}})]}),(0,e.jsx)(N.UW,{children:(0,e.jsx)(f.Z,{name:["bgSize"],children:function(i){var u=i.bgSize;if(u=="default")return(0,e.jsxs)(N.UW,{children:[(0,e.jsx)(te.Z,{width:"xs",name:["bgImage","top"],label:"\u8DDD\u9876\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(te.Z,{width:"xs",name:["bgImage","bottom"],label:"\u8DDD\u5E95\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(te.Z,{width:"xs",name:["bgImage","left"],label:"\u8DDD\u5DE6\u4FA7\u504F\u79FB\u91CF"}),(0,e.jsx)(te.Z,{width:"xs",name:["bgImage","right"],label:"\u8DDD\u53F3\u4FA7\u504F\u79FB\u91CF"})]})}})}),(0,e.jsx)(Fe.Z,{name:"siteLink",label:"\u5E95\u90E8\u94FE\u63A5",showAddButton:!0,hideCopyButton:!0,gap:10,items:[{name:"title",label:"\u6587\u672C"},{name:"href",label:"\u94FE\u63A5"}]}),(0,e.jsx)(be.Z,{label:"\u7248\u6743\u4FE1\u606F",name:"siteCopyright"}),(0,e.jsxs)(N.UW,{title:"\u767B\u5F55\u9875",children:[(0,e.jsx)(ue.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(R.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"loginLogo"})]})]})})}),Se=Pe,ye=n(68602),Te=n(80821);function Ae(){var C=(0,A.useRef)(),p=(0,A.useRef)(),F=(0,o.useModel)("@@initialState"),r=F.initialState,q=F.loading,H=F.error,v=F.refresh,Z=F.setInitialState,x=(0,o.useAccess)(),O=(0,A.useContext)(_.Z),w=O.message,D=O.lang,z=(0,o.useAntdConfigSetter)();return(0,A.useEffect)(function(){var i,u,m,h,a,c,s,g;(i=C.current)===null||i===void 0||i.setFieldsValue({algorithm:(u=r==null?void 0:r.theme.algorithm)!==null&&u!==void 0?u:"default",mainMenu:(m=r==null?void 0:r.theme.mainMenu)!==null&&m!==void 0?m:"top",compact:(h=r==null?void 0:r.theme.compact)!==null&&h!==void 0?h:"default",fontSize:(a=r==null?void 0:r.theme.fontSize)!==null&&a!==void 0?a:14,fontSizeConsole:(c=r==null?void 0:r.theme.fontSizeConsole)!==null&&c!==void 0?c:12,sideMenu:(s=r==null?void 0:r.theme.sideMenu)!==null&&s!==void 0?s:"default",tablePageSize:(g=r==null?void 0:r.theme.tablePageSize)!==null&&g!==void 0?g:"20"})},[r]),(0,e.jsx)(j.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsxs)(j.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(le.Z,{}),subTitle:"\u57FA\u672C\u914D\u7F6E",children:[x.canSeeThemeUser&&(0,e.jsx)(Se,{ref:p}),(0,e.jsxs)(P.A,{layout:"horizontal",labelAlign:"right",labelCol:he,formRef:C,submitter:{render:function(u,m){return[m[1]]}},onFinish:function(){var i=y()(d()().mark(function u(m){var h;return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(h={algorithm:m.algorithm,mainMenu:m.mainMenu,sideMenu:m.sideMenu,compact:m.compact,fontSizeConsole:m.fontSizeConsole,fontSize:m.fontSize,tablePageSize:m.tablePageSize},m.algorithm==(r==null?void 0:r.theme.algorithm)){c.next=4;break}return c.next=4,(0,ae.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",m.algorithm),localStorage.setItem("dpanel-compact",m.compact),c.next=8,(0,ye.Gk)(h);case 8:w.success(D("notification.finishTheme"));case 9:case"end":return c.stop()}},u)}));return function(u){return i.apply(this,arguments)}}(),children:[(0,e.jsx)(ne.Z.Group,{name:"algorithm",label:"\u4E3B\u9898\u76AE\u80A4",initialValue:"default",radioType:"button",valueEnum:function(){var u={default:"\u4EAE\u8272",dark:"\u6697\u8272",system:"\u8DDF\u968F\u7CFB\u7EDF"};return u}}),x.canSeeThemeUser&&(0,e.jsx)(f.Z,{name:["algorithm"],children:function(u){var m=u.algorithm;if(m!="system")return(0,e.jsx)(V.Z,{label:"\u81EA\u5B9A\u4E49\u76AE\u80A4\u914D\u7F6E",children:(0,e.jsxs)(ie.Z.Compact,{children:[(0,e.jsx)(re.ZP,{onClick:function(){var a;(a=p.current)===null||a===void 0||a.show()},icon:(0,e.jsx)(le.Z,{}),children:"\u914D\u7F6E"}),(0,e.jsx)(Te.Z,{action:y()(d()().mark(function h(){var a;return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,ae.H)({clearColor:!0,clearSite:!0});case 2:z(function(g){return g.theme={token:{}},g}),(a=p.current)===null||a===void 0||a.reset(),window.location.reload();case 5:case"end":return s.stop()}},h)})),children:"\u6062\u590D\u9ED8\u8BA4"})]})})}}),(0,e.jsx)(ne.Z.Group,{name:"mainMenu",label:"\u4E3B\u83DC\u5355\u4F4D\u7F6E",initialValue:"top",radioType:"button",valueEnum:{top:"\u9876\u90E8",side:"\u4FA7\u9762"}}),(0,e.jsx)(ne.Z.Group,{name:"sideMenu",label:"\u5DE6\u4FA7\u83DC\u5355",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4\u5C55\u5F00",collapse:"\u9ED8\u8BA4\u6536\u7F29"}}),(0,e.jsx)(ne.Z.Group,{name:"compact",label:"\u6587\u672C\u5E03\u5C40",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4",compact:"\u7D27\u51D1"}}),(0,e.jsx)(V.Z,{name:"fontSize",label:"\u4E3B\u9898\u5B57\u53F7",initialValue:14,children:(0,e.jsx)(se.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(V.Z,{name:"fontSizeConsole",label:"\u63A7\u5236\u53F0\u5B57\u53F7",initialValue:12,children:(0,e.jsx)(se.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(ge.Z,{initialValue:"20",label:"\u8868\u683C\u5206\u9875\u6570",name:"tablePageSize",valueEnum:{10:"\u6BCF\u987510\u6761",20:"\u6BCF\u987520\u6761",50:"\u6BCF\u987550\u6761",100:"\u6BCF\u9875100\u6761",all:"\u663E\u793A\u5168\u90E8"}})]})]})})}var Ze=n(90078),_e=n(92398);function Ie(){var C=(0,o.useSearchParams)(),p=b()(C,2),F=p[0],r=p[1],q=(0,A.useState)("user"),H=b()(q,2),v=H[0],Z=H[1];return(0,A.useEffect)(function(){var x;Z((x=F.get("tab"))!==null&&x!==void 0?x:"user")},[]),(0,e.jsx)(Ze._z,{children:(0,e.jsx)(j.Z,{children:(0,e.jsx)(_e.Z,{activeKey:v,onChange:function(O){Z(O),r("tab="+O)},items:[{key:"user",label:"\u767B\u5F55\u914D\u7F6E",children:(0,e.jsx)(ce,{})},{key:"theme",label:"\u754C\u9762\u914D\u7F6E",children:(0,e.jsx)(Ae,{})},{key:"other",label:"\u5176\u5B83",children:(0,e.jsx)(fe,{})}]})})})}},97961:function(ee,M,n){n.d(M,{GH:function(){return L},MF:function(){return W},_2:function(){return G},fN:function(){return _},ii:function(){return y},vC:function(){return o}});var K=n(15009),b=n.n(K),k=n(99289),d=n.n(k),S=n(82346),y=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function _(l){return I.apply(this,arguments)}function I(){return I=d()(b()().mark(function l(j){return b()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,S.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:j}));case 1:case"end":return f.stop()}},l)})),I.apply(this,arguments)}function o(l){return t.apply(this,arguments)}function t(){return t=d()(b()().mark(function l(j){return b()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,S.request)("/api/app/image/import-by-container-tar",{method:"POST",data:j}));case 1:case"end":return f.stop()}},l)})),t.apply(this,arguments)}function L(l){return $.apply(this,arguments)}function $(){return $=d()(b()().mark(function l(j){return b()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,S.request)("/api/app/image/import-by-image-tar",{method:"POST",data:j}));case 1:case"end":return f.stop()}},l)})),$.apply(this,arguments)}function G(l){return E.apply(this,arguments)}function E(){return E=d()(b()().mark(function l(j){return b()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,S.request)("/api/common/attach/delete",{method:"POST",data:j});case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},l)})),E.apply(this,arguments)}function W(){return T.apply(this,arguments)}function T(){return T=d()(b()().mark(function l(){return b()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,S.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return P.stop()}},l)})),T.apply(this,arguments)}}}]);
