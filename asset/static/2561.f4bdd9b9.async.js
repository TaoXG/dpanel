"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2561],{99861:function(w,v,r){var y=r(15009),n=r.n(y),E=r(64599),s=r.n(E),i=r(99289),C=r.n(i),O=r(5574),U=r.n(O),D=r(42119),b=r(83062),g=r(67294),R=r(92754),o=r(3393),j=r(184),_=r(38345),f=r(85893),P=(0,g.forwardRef)(function(l,d){(0,g.useImperativeHandle)(d,function(){return{start:function(){return t(!0),$()},finish:function(){t(!1)}}});var T=(0,g.useState)(0),m=U()(T,2),p=m[0],h=m[1],u=(0,g.useRef)(),e=(0,g.useState)(!1),c=U()(e,2),a=c[0],t=c[1],$=function(){var I=C()(n()().mark(function A(){var L,W,B,K,S,Z,k;return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:W=0,B=s()(l.image),M.prev=2,B.s();case 4:if((K=B.n()).done){M.next=14;break}return Z=K.value,h(W),(S=u.current)===null||S===void 0||S.setStart(Z),M.next=10,(0,o.Gb)({tag:Z,type:"pull"});case 10:k=M.sent,W++;case 12:M.next=4;break;case 14:M.next=19;break;case 16:M.prev=16,M.t0=M.catch(2),B.e(M.t0);case 19:return M.prev=19,B.f(),M.finish(19);case 22:(L=u.current)===null||L===void 0||L.setFinish(),h(W),l.finishAutoHide&&t(!1);case 25:case"end":return M.stop()}},A,null,[[2,16,19,22]])}));return function(){return I.apply(this,arguments)}}();return(0,f.jsxs)(j.a,{trigger:l.trigger,width:800,open:a,submitter:!1,title:"\u4E00\u952E\u62C9\u53D6\u955C\u50CF",onOpenChange:function(){var I=C()(n()().mark(function A(L){var W;return n()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:t(L),L&&l.trigger&&$(),L||(W=u.current)===null||W===void 0||W.close();case 3:case"end":return K.stop()}},A)}));return function(A){return I.apply(this,arguments)}}(),drawerProps:{forceRender:!0},children:[(0,f.jsx)(_.Z,{children:l.image&&(0,f.jsx)(D.Z,{current:p,items:l.image.map(function(I,A){return{title:(0,f.jsx)(b.Z,{title:I,children:I.length>15?I.substring(0,6)+" ... "+I.substring(I.length-6):I}),key:A}})})}),(0,f.jsx)(_.Z,{children:(0,f.jsx)(R.Z,{ref:u})})]})});v.Z=P},44771:function(w,v,r){r.d(v,{Z:function(){return s}});var y=r(64317),n=r(67294),E=r(85893);function s(i){return(0,E.jsx)(y.Z,{label:i.label,name:"restart",width:"sm",initialValue:i.defaultValue?i.defaultValue:"on-failure",options:[{value:"no",label:"\u4E0D\u91CD\u542F"},{value:"on-failure",label:"\u5931\u8D25\u540E\u91CD\u542F\uFF08\u9ED8\u8BA45\u6B21\uFF09"},{value:"unless-stopped",label:"\u672A\u624B\u52A8\u505C\u6B62\u5219\u91CD\u542F"},{value:"always",label:"\u4E00\u76F4\u91CD\u542F"}]})}},37413:function(w,v,r){r.d(v,{Z:function(){return j}});var y=r(19632),n=r.n(y),E=r(27496),s=r(58638),i=r(36693),C=r(35995),O=r(99611),U=r(38345),D=r(42075),b=r(66309),g=r(55241),R=r(67294),o=r(85893);function j(_){var f=[];_.publicPort&&(f=n()(_.publicPort)),_.privatePort&&(f=[].concat(n()(f),n()(_.privatePort)));var P=(0,o.jsxs)(U.Z,{direction:_.layout=="inline"?"row":"column",style:{width:_.layout!="inline"?500:"auto"},ghost:!0,children:[f.length>0&&(0,o.jsx)(U.Z,{title:(0,o.jsx)(E.Z,{}),subTitle:"\u7ED1\u5B9A\u7AEF\u53E3",ghost:_.ghost,children:f.map(function(l,d){var T,m=(T=_.serverIp)!==null&&T!==void 0?T:"localhost";if(m!=""&&m.indexOf("http")===-1&&m.indexOf(":")>-1&&(m="[".concat(m,"]")),m==""){var p=document.location.protocol+"//"+document.location.hostname;m=p}return m==""&&(m=l.IP),(0,o.jsx)(D.Z,{size:"large",wrap:!0,children:(0,o.jsx)(b.Z,{color:l.PublicPort?"#2db7f5":"warning",icon:l.PublicPort?(0,o.jsx)(s.Z,{}):"",style:{marginBottom:5,width:210},children:l.PublicPort?(0,o.jsx)("a",{href:"".concat(m.indexOf("http")===0?m:"http://"+m,":").concat(l.PublicPort),target:"_blank",children:"".concat(l.PublicPort?l.IP+":"+l.PublicPort+" -> ":"").concat(l.PrivatePort,"/").concat(l.Type)},"link".concat(d)):"".concat(l.PrivatePort,"/").concat(l.Type)})},"space".concat(d))})}),_.domain&&_.domain.length>0&&(0,o.jsx)(U.Z,{title:(0,o.jsx)(i.Z,{}),subTitle:"\u7ED1\u5B9A\u57DF\u540D",ghost:_.ghost,children:(0,o.jsx)(D.Z,{wrap:!0,style:{textAlign:"left"},children:_.domain&&_.domain.map(function(l,d){return(0,o.jsx)(b.Z,{color:"blue",icon:(0,o.jsx)(s.Z,{}),children:(0,o.jsx)("a",{href:l,target:"_blank",children:l})},"domain".concat(d))})})})]});return _.showInDetail?P:(0,o.jsx)(g.Z,{placement:"right",content:P,children:(0,o.jsxs)(D.Z,{direction:"vertical",children:[_.privatePort&&_.privatePort.length>0&&(0,o.jsxs)(b.Z,{color:"warning",icon:(0,o.jsx)(C.Z,{}),children:["\u5185\u90E8\u7AEF\u53E3: ",_.privatePort.length]}),_.publicPort&&_.publicPort.length>0&&(0,o.jsxs)(b.Z,{color:"#2db7f5",icon:(0,o.jsx)(O.Z,{}),children:["\u5BF9\u5916\u7AEF\u53E3: ",_.publicPort.length]}),_.domain&&_.domain.length>0&&(0,o.jsx)(b.Z,{color:"blue",icon:(0,o.jsx)(i.Z,{}),children:_.domainTitle?_.domainTitle:"\u7ED1\u5B9A\u57DF\u540D: ".concat(_.domain.length)})]})})}},92754:function(w,v,r){var y=r(5574),n=r.n(y),E=r(67294),s=r(82346),i=r(38703),C=r(85893),O=(0,E.forwardRef)(function(U,D){var b=(0,E.useState)(""),g=n()(b,2),R=g[0],o=g[1];(0,E.useImperativeHandle)(D,function(){return{setFinish:function(){l({finish:{downloading:100,extracting:100}})},setStart:function(T){T&&o(T),l({start:{downloading:0,extracting:0}})},close:function(){j.progress.close("image:pull:"+R),l({start:{downloading:0,extracting:0}})}}});var j=(0,s.useModel)("subscriber");j.addDataHandler("image:pull:"+R,function(d){l(d.data)});var _=(0,E.useState)(),f=n()(_,2),P=f[0],l=f[1];return(0,E.useEffect)(function(){return l({start:{downloading:0,extracting:0}}),function(){j.progress.close("image:pull:"+R)}},[]),(0,C.jsx)(C.Fragment,{children:P&&Object.keys(P).map(function(d){return(0,C.jsx)(i.Z,{percent:P[d].downloading,success:{percent:P[d].extracting}},d)})})});v.Z=O},78451:function(w,v,r){r.d(v,{Z:function(){return E}});var y=r(67294),n=r(85893);function E(s){return(0,n.jsx)("span",{style:{width:s.width?s.width:"auto",wordBreak:"break-word"},children:s.content})}},62597:function(w,v,r){r.d(v,{$G:function(){return C},Ct:function(){return P},Tb:function(){return g},XH:function(){return o},cl:function(){return D},fp:function(){return U},iE:function(){return _},xb:function(){return d},ze:function(){return h}});var y=r(15009),n=r.n(y),E=r(99289),s=r.n(E),i=r(82346);function C(e){return O.apply(this,arguments)}function O(){return O=s()(n()().mark(function e(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/api/app/site/create-by-image",{method:"POST",data:c}));case 1:case"end":return t.stop()}},e)})),O.apply(this,arguments)}var U={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096};function D(e){return b.apply(this,arguments)}function b(){return b=s()(n()().mark(function e(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/api/app/site/get-list",{method:"POST",data:c}));case 1:case"end":return t.stop()}},e)})),b.apply(this,arguments)}function g(e){return R.apply(this,arguments)}function R(){return R=s()(n()().mark(function e(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c.download=!1,t.next=3,(0,i.request)("/api/app/log/run",{method:"POST",data:c});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},e)})),R.apply(this,arguments)}function o(e){return j.apply(this,arguments)}function j(){return j=s()(n()().mark(function e(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c.download=!0,t.next=3,(0,i.request)("/api/app/log/run",{method:"POST",data:c,responseType:"blob"});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},e)})),j.apply(this,arguments)}function _(e){return f.apply(this,arguments)}function f(){return f=s()(n()().mark(function e(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.request)("/api/app/site/get-detail",{data:c,method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},e)})),f.apply(this,arguments)}function P(e){return l.apply(this,arguments)}function l(){return l=s()(n()().mark(function e(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/api/app/container/delete",{method:"POST",data:c}));case 1:case"end":return t.stop()}},e)})),l.apply(this,arguments)}function d(e){return T.apply(this,arguments)}function T(){return T=s()(n()().mark(function e(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/api/app/site/delete",{method:"POST",data:c}));case 1:case"end":return t.stop()}},e)})),T.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function e(c){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request("/api/app/site/update-title",{method:"POST",data:c});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},e)})),p.apply(this,arguments)}function h(e){return u.apply(this,arguments)}function u(){return u=s()(n()().mark(function e(c){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("/api/app/container/ignore",{method:"POST",data:c}));case 1:case"end":return t.stop()}},e)})),u.apply(this,arguments)}},60335:function(w,v,r){r.d(v,{IE:function(){return U},IW:function(){return C},KK:function(){return j},LJ:function(){return f},RF:function(){return T},Re:function(){return l},aF:function(){return p},eE:function(){return R},jV:function(){return b}});var y=r(15009),n=r.n(y),E=r(99289),s=r.n(E),i=r(82346);function C(u){return O.apply(this,arguments)}function O(){return O=s()(n()().mark(function u(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/container/status",{method:"POST",data:e}));case 1:case"end":return a.stop()}},u)})),O.apply(this,arguments)}function U(u){return D.apply(this,arguments)}function D(){return D=s()(n()().mark(function u(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/container/get-list",{data:e,method:"POST"}));case 1:case"end":return a.stop()}},u)})),D.apply(this,arguments)}function b(u){return g.apply(this,arguments)}function g(){return g=s()(n()().mark(function u(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/container/get-detail",{data:e,method:"POST"}));case 1:case"end":return a.stop()}},u)})),g.apply(this,arguments)}function R(u){return o.apply(this,arguments)}function o(){return o=s()(n()().mark(function u(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/container/update",{data:e,method:"POST"}));case 1:case"end":return a.stop()}},u)})),o.apply(this,arguments)}function j(){return _.apply(this,arguments)}function _(){return _=s()(n()().mark(function u(){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,i.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return c.stop()}},u)})),_.apply(this,arguments)}function f(u){return P.apply(this,arguments)}function P(){return P=s()(n()().mark(function u(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/container/export",{method:"POST",data:e,responseType:"blob"}));case 1:case"end":return a.stop()}},u)})),P.apply(this,arguments)}function l(u){return d.apply(this,arguments)}function d(){return d=s()(n()().mark(function u(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/container/commit",{method:"POST",data:e}));case 1:case"end":return a.stop()}},u)})),d.apply(this,arguments)}function T(u){return m.apply(this,arguments)}function m(){return m=s()(n()().mark(function u(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/container/upgrade",{method:"POST",data:e}));case 1:case"end":return a.stop()}},u)})),m.apply(this,arguments)}function p(u){return h.apply(this,arguments)}function h(){return h=s()(n()().mark(function u(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/container/copy",{method:"POST",data:e}));case 1:case"end":return a.stop()}},u)})),h.apply(this,arguments)}},3393:function(w,v,r){r.d(v,{Gb:function(){return U},Pn:function(){return R},Rb:function(){return j},YU:function(){return C},ZQ:function(){return l},_U:function(){return b},cD:function(){return T},cd:function(){return f}});var y=r(15009),n=r.n(y),E=r(99289),s=r.n(E),i=r(82346);function C(p){return O.apply(this,arguments)}function O(){return O=s()(n()().mark(function p(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/get-detail",{method:"POST",data:h}));case 1:case"end":return e.stop()}},p)})),O.apply(this,arguments)}function U(p){return D.apply(this,arguments)}function D(){return D=s()(n()().mark(function p(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/tag-remote",{method:"POST",data:h}));case 1:case"end":return e.stop()}},p)})),D.apply(this,arguments)}function b(p){return g.apply(this,arguments)}function g(){return g=s()(n()().mark(function p(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/tag-add",{method:"POST",data:h}));case 1:case"end":return e.stop()}},p)})),g.apply(this,arguments)}function R(p){return o.apply(this,arguments)}function o(){return o=s()(n()().mark(function p(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/tag-delete",{method:"POST",data:h}));case 1:case"end":return e.stop()}},p)})),o.apply(this,arguments)}function j(p){return _.apply(this,arguments)}function _(){return _=s()(n()().mark(function p(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/export",{method:"POST",data:h,responseType:"blob"}));case 1:case"end":return e.stop()}},p)})),_.apply(this,arguments)}function f(p){return P.apply(this,arguments)}function P(){return P=s()(n()().mark(function p(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/pro/image/get-remote-tag",{method:"POST",data:h}));case 1:case"end":return e.stop()}},p)})),P.apply(this,arguments)}function l(p){return d.apply(this,arguments)}function d(){return d=s()(n()().mark(function p(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/check-upgrade",{method:"POST",data:h}));case 1:case"end":return e.stop()}},p)})),d.apply(this,arguments)}function T(p){return m.apply(this,arguments)}function m(){return m=s()(n()().mark(function p(h){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/get-rootfs",{method:"POST",data:h}));case 1:case"end":return e.stop()}},p)})),m.apply(this,arguments)}}}]);
