"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(J,F,e){e.d(F,{Z:function(){return h}});var P=e(87462),c=e(67294),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},D=S,M=e(84089),j=function(t,A){return c.createElement(M.Z,(0,P.Z)({},t,{ref:A,icon:D}))},E=c.forwardRef(j),h=E},52688:function(J,F,e){var P=e(1413),c=e(45987),S=e(67294),D=e(35510),M=e(85893),j=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],E=S.forwardRef(function(h,v){var t=h.fieldProps,A=h.unCheckedChildren,Z=h.checkedChildren,I=h.proFieldProps,C=(0,c.Z)(h,j);return(0,M.jsx)(D.Z,(0,P.Z)({valueType:"switch",fieldProps:(0,P.Z)({unCheckedChildren:A,checkedChildren:Z},t),ref:v,valuePropName:"checked",proFieldProps:I,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},C))});F.Z=E},5966:function(J,F,e){var P=e(97685),c=e(1413),S=e(45987),D=e(21770),M=e(99859),j=e(55241),E=e(97435),h=e(67294),v=e(35510),t=e(85893),A=["fieldProps","proFieldProps"],Z=["fieldProps","proFieldProps"],I="text",C=function(d){var n=d.fieldProps,y=d.proFieldProps,m=(0,S.Z)(d,A);return(0,t.jsx)(v.Z,(0,c.Z)({valueType:I,fieldProps:n,filedConfig:{valueType:I},proFieldProps:y},m))},x=function(d){var n=(0,D.Z)(d.open||!1,{value:d.open,onChange:d.onOpenChange}),y=(0,P.Z)(n,2),m=y[0],O=y[1];return(0,t.jsx)(M.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(w){var _,r=w.getFieldValue(d.name||[]);return(0,t.jsx)(j.Z,(0,c.Z)((0,c.Z)({getPopupContainer:function(l){return l&&l.parentNode?l.parentNode:l},onOpenChange:function(l){return O(l)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(_=d.statusRender)===null||_===void 0?void 0:_.call(d,r),d.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:d.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},d.popoverProps),{},{open:m,children:d.children}))}})},L=function(d){var n=d.fieldProps,y=d.proFieldProps,m=(0,S.Z)(d,Z),O=(0,h.useState)(!1),$=(0,P.Z)(O,2),w=$[0],_=$[1];return n!=null&&n.statusRender&&m.name?(0,t.jsx)(x,{name:m.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:w,onOpenChange:_,children:(0,t.jsx)("div",{children:(0,t.jsx)(v.Z,(0,c.Z)({valueType:"password",fieldProps:(0,c.Z)((0,c.Z)({},(0,E.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(u){var l;n==null||(l=n.onBlur)===null||l===void 0||l.call(n,u),_(!1)},onClick:function(u){var l;n==null||(l=n.onClick)===null||l===void 0||l.call(n,u),_(!0)}}),proFieldProps:y,filedConfig:{valueType:I}},m))})}):(0,t.jsx)(v.Z,(0,c.Z)({valueType:"password",fieldProps:n,proFieldProps:y,filedConfig:{valueType:I}},m))},W=C;W.Password=L,W.displayName="ProFormComponent",F.Z=W},80821:function(J,F,e){e.d(F,{Z:function(){return v}});var P=e(5574),c=e.n(P),S=e(24963),D=e(86738),M=e(28036),j=e(83062),E=e(67294),h=e(85893);function v(t){var A=(0,E.useState)(!1),Z=c()(A,2),I=Z[0],C=Z[1],x=(0,E.useContext)(S.Z),L=x.lang,W=x.notice,B=x.message,d=function(){C(!0);var y=t.action();y instanceof Promise?y.then(function(m){if(C(!1),m){typeof t.onSuccess=="function"&&t.onSuccess(m);var O="";t.messageSuccess?typeof t.messageSuccess=="function"?O=t.messageSuccess(m):O=t.messageSuccess.indexOf("notification.")==0?L(t.messageSuccess):t.messageSuccess:O=L("notification.finish"),t.asynced?B.info(O):B.success(O)}}).catch(function(m){C(!1),typeof t.onError=="function"&&t.onError(m)}):C(!1)};return t.confirm?(0,h.jsx)(D.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:L("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?L(t.confirm):t.confirm,onConfirm:d,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,h.jsx)(M.ZP,{block:t.block,disabled:t.disabled,icon:t.icon,loading:I,danger:t.danger,type:t.type,children:t.children})}):(0,h.jsx)(j.Z,{title:t.tips,children:(0,h.jsx)(M.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto"}:{},disabled:t.disabled,icon:t.icon,loading:I,onClick:d,danger:t.danger,type:t.type,children:t.children})})}},12491:function(J,F,e){e.d(F,{Z:function(){return h}});var P=e(24963),c=e(88484),S=e(62370),D=e(31418),M=e(28036),j=e(67294),E=e(85893);function h(v){var t=(0,j.useContext)(P.Z),A=t.message,Z=t.notice,I=t.lang,C=(0,j.useRef)(null),x=D.Z.useApp(),L=function(){C.current&&(C.current.click(),C.current.onchange=function(B){if(!B||!B.target)return"";var d=new FileReader;d.onload=function(y){var m,O,$=(m=y.target)===null||m===void 0?void 0:m.result;if(v.onLoad)try{v.onLoad&&v.onLoad($)}catch(w){Z.error(w);return}typeof v.onImport=="function"&&(A.success("\u6210\u529F\u5BFC\u5165 ".concat(v.title)),v.onImport($)),(O=C.current)!==null&&O!==void 0&&O.value&&(C.current.value="")};var n=B.target;if(n.files)try{d.readAsText(n.files[0])}catch(y){Z.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(S.Z,{children:(0,E.jsx)(M.ZP,{icon:(0,E.jsx)(c.Z,{}),block:!0,onClick:L,children:v.title})}),(0,E.jsx)("input",{style:{display:"none"},type:"file",ref:C,name:"importFileInput"})]})}},24963:function(J,F,e){var P=e(67294),c=(0,P.createContext)({});F.Z=c},53893:function(J,F,e){e.r(F),e.d(F,{default:function(){return i}});var P=e(15009),c=e.n(P),S=e(99289),D=e.n(S),M=e(5574),j=e.n(M),E=e(80821),h=e(184),v=e(5966),t=e(52688),A=e(97462),Z=e(62370),I=e(28036),C=e(86250),x=e(67294),L=e(91845),W=e(87662),B=e(24963),d=e(12491),n=e(85893),y=(0,x.forwardRef)(function(f,X){var H;(0,x.useImperativeHandle)(X,function(){return{edit:function(a){var s;(s=U.current)===null||s===void 0||s.setFieldsValue({name:a.name,title:a.title,address:a.address,enableTLS:a.enableTLS,tlsCa:a.tlsCa,tlsCert:a.tlsCert,tlsKey:a.tlsKey,enableComposePath:a.enableComposePath}),b(!0),N(a.name)}}});var V=(0,x.useState)(!1),z=j()(V,2),Y=z[0],b=z[1],U=(0,x.useRef)(),K=(0,x.useState)(""),q=j()(K,2),Q=q[0],N=q[1],G=(0,x.useContext)(B.Z),p=G.lang;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.ZP,{onClick:function(){var a;N(""),(a=U.current)===null||a===void 0||a.resetFields(),b(!0)},type:"primary",children:"\u6DFB\u52A0\u670D\u52A1\u7AEF"}),(0,n.jsxs)(h.a,{drawerProps:{forceRender:!0},onOpenChange:function(a){b(a)},open:Y,width:800,formRef:U,title:(H=U.current)!==null&&H!==void 0&&H.getFieldValue&&U.current.getFieldValue("name")=="local"?"\u914D\u7F6E\u9ED8\u8BA4Docker\u670D\u52A1\u7AEF":"\u6DFB\u52A0\u8FDC\u7A0BDocker\u670D\u52A1\u7AEF",onFinish:function(){var g=D()(c()().mark(function a(s){var o,T;return c()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return o={name:s.name,title:s.title,address:s.address,tlsCa:s.tlsCa,tlsCert:s.tlsCert,tlsKey:s.tlsKey,enableTLS:s.enableTLS,enableComposePath:s.enableComposePath,composePath:s.enableComposePath?s.composePath:""},k.next=3,(0,W.ad)(o);case 3:return T=k.sent,f.onFinish&&f.onFinish(),k.abrupt("return",!0);case 6:case"end":return k.stop()}},a)}));return function(a){return g.apply(this,arguments)}}(),children:[(0,n.jsx)(v.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(a){var s="";if(a.target.value&&!Q){var o,T=(0,L.N9)(a.target.value.trim(),{toneType:"none",type:"array"});s=T.join(""),(o=U.current)===null||o===void 0||o.setFieldValue("name",s)}}}}),(0,n.jsx)(v.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:Q!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,n.jsx)(v.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,n.jsxs)(C.Z,{gap:80,children:[(0,n.jsx)(t.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,n.jsx)(A.Z,{name:["enableComposePath","name"],children:function(a){var s=a.name;if(s!="local")return(0,n.jsx)(t.Z,{label:p("system.env.createEnableComposePath"),name:"enableComposePath",tooltip:"\u5F00\u542F\u72EC\u7ACBcompose\u914D\u7F6E\u540E\uFF0C\u5207\u6362\u8FDC\u7A0B docker \u5BA2\u6237\u7AEF\u65F6\u5C06\u53EA\u4F1A\u8BFB\u53D6\u8BE5\u73AF\u5883\u4E13\u5C5E\u76EE\u5F55\u4E0B\u7684 compose \u4EFB\u52A1"})}})]}),(0,n.jsx)(A.Z,{name:["enableComposePath","name"],children:function(a){var s=a.enableComposePath,o=a.name;if(s)return(0,n.jsx)(v.Z,{label:p("system.env.createComposePath"),name:"composePath",disabled:!0,fieldProps:{value:"/dpanel/compose/compose-".concat(o!=null?o:"")}})}}),(0,n.jsx)(A.Z,{name:["enableTLS"],children:function(a){var s=a.enableTLS;if(s)return(0,n.jsxs)(C.Z,{gap:20,justify:"start",children:[(0,n.jsx)(Z.Z,{name:"tlsCa",label:"\u4E0A\u4F20\u5BA2\u6237\u7AEF\u8BC1\u4E66",children:(0,n.jsx)(d.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(T){var R;return(R=U.current)===null||R===void 0||R.setFieldValue("tlsCa",T),!0},onLoad:function(T){if(T.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(Z.Z,{name:"tlsCert",label:" ",children:(0,n.jsx)(d.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(T){var R;return(R=U.current)===null||R===void 0||R.setFieldValue("tlsCert",T),!0},onLoad:function(T){if(T.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(Z.Z,{label:" ",name:"tlsKey",children:(0,n.jsx)(d.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(T){var R;return(R=U.current)===null||R===void 0||R.setFieldValue("tlsKey",T),!0},onLoad:function(T){if(T.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),m=y,O=e(86548),$=e(90078),w=e(78099),_=e(82346),r=e(42075),u=e(96074),l=e(25593);function i(){var f=(0,x.useRef)(),X=(0,x.useRef)(),H=(0,_.useSearchParams)(),V=j()(H,2),z=V[0],Y=V[1],b=(0,_.useModel)("@@initialState"),U=b.initialState,K=b.loading,q=b.error,Q=b.refresh,N=b.setInitialState;return(0,n.jsx)($._z,{header:{extra:[(0,n.jsx)(m,{ref:X,onFinish:D()(c()().mark(function G(){var p,g,a;return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!z.get("id")){o.next=5;break}return o.next=3,(0,W.vC)({name:(a=z.get("id"))!==null&&a!==void 0?a:"local"});case 3:return Y(""),o.abrupt("return");case 5:Q(),!((p=f.current)===null||p===void 0)&&p.reloadAndRest&&((g=f.current)===null||g===void 0||g.reloadAndRest());case 7:case"end":return o.stop()}},G)}))},"dockerEnvCreate")]},children:(0,n.jsx)(w.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(p,g,a,s,o){return(0,n.jsx)(r.Z,{split:(0,n.jsx)(u.Z,{type:"vertical"}),children:(0,n.jsx)(l.Z.Link,{onClick:function(){var R;(R=X.current)===null||R===void 0||R.edit(g)},children:(0,n.jsx)(O.Z,{})},g.name)})}}],pagination:!1,request:D()(c()().mark(function G(){var p;return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,W.Kg)();case 2:return p=a.sent,z.get("id")&&p.data.list.map(function(s){if(s.name==z.get("id")){var o;(o=X.current)===null||o===void 0||o.edit(s)}}),a.abrupt("return",{data:p.data.list,total:p.data.list.length});case 5:case"end":return a.stop()}},G)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(p){return{disabled:p.default}}},actionRef:f,tableAlertOptionRender:function(p){var g=p.selectedRowKeys;return(0,n.jsx)(r.Z,{size:16,children:(0,n.jsx)(E.Z,{danger:!0,type:"primary",action:function(){return(0,W._g)({name:g})},onSuccess:function(){var s,o;return Q(),!((s=f.current)===null||s===void 0)&&s.reloadAndRest&&((o=f.current)===null||o===void 0||o.reloadAndRest()),!0},onError:function(){var s,o;return!((s=f.current)===null||s===void 0)&&s.reset&&((o=f.current)===null||o===void 0||o.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})}})})}},86250:function(J,F,e){e.d(F,{Z:function(){return _}});var P=e(67294),c=e(93967),S=e.n(c),D=e(98423),M=e(98065),j=e(53124),E=e(83559),h=e(83262);const v=["wrap","nowrap","wrap-reverse"],t=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],A=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],Z=(r,u)=>{const l=u.wrap===!0?"wrap":u.wrap;return{[`${r}-wrap-${l}`]:l&&v.includes(l)}},I=(r,u)=>{const l={};return A.forEach(i=>{l[`${r}-align-${i}`]=u.align===i}),l[`${r}-align-stretch`]=!u.align&&!!u.vertical,l},C=(r,u)=>{const l={};return t.forEach(i=>{l[`${r}-justify-${i}`]=u.justify===i}),l};function x(r,u){return S()(Object.assign(Object.assign(Object.assign({},Z(r,u)),I(r,u)),C(r,u)))}var L=x;const W=r=>{const{componentCls:u}=r;return{[u]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},B=r=>{const{componentCls:u}=r;return{[u]:{"&-gap-small":{gap:r.flexGapSM},"&-gap-middle":{gap:r.flexGap},"&-gap-large":{gap:r.flexGapLG}}}},d=r=>{const{componentCls:u}=r,l={};return v.forEach(i=>{l[`${u}-wrap-${i}`]={flexWrap:i}}),l},n=r=>{const{componentCls:u}=r,l={};return A.forEach(i=>{l[`${u}-align-${i}`]={alignItems:i}}),l},y=r=>{const{componentCls:u}=r,l={};return t.forEach(i=>{l[`${u}-justify-${i}`]={justifyContent:i}}),l},m=()=>({});var O=(0,E.I$)("Flex",r=>{const{paddingXS:u,padding:l,paddingLG:i}=r,f=(0,h.IX)(r,{flexGapSM:u,flexGap:l,flexGapLG:i});return[W(f),B(f),d(f),n(f),y(f)]},m,{resetStyle:!1}),$=function(r,u){var l={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&u.indexOf(i)<0&&(l[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,i=Object.getOwnPropertySymbols(r);f<i.length;f++)u.indexOf(i[f])<0&&Object.prototype.propertyIsEnumerable.call(r,i[f])&&(l[i[f]]=r[i[f]]);return l},_=P.forwardRef((r,u)=>{const{prefixCls:l,rootClassName:i,className:f,style:X,flex:H,gap:V,children:z,vertical:Y=!1,component:b="div"}=r,U=$(r,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:K,direction:q,getPrefixCls:Q}=P.useContext(j.E_),N=Q("flex",l),[G,p,g]=O(N),a=Y!=null?Y:K==null?void 0:K.vertical,s=S()(f,i,K==null?void 0:K.className,N,p,g,L(N,r),{[`${N}-rtl`]:q==="rtl",[`${N}-gap-${V}`]:(0,M.n)(V),[`${N}-vertical`]:a}),o=Object.assign(Object.assign({},K==null?void 0:K.style),X);return H&&(o.flex=H),V&&!(0,M.n)(V)&&(o.gap=V),G(P.createElement(b,Object.assign({ref:u,className:s,style:o},(0,D.Z)(U,["justify","wrap","align"])),z))})}}]);
