"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3805],{49610:function(R,v,e){var O=e(67294),r=e(54964),T=e(52626),o=e(12320),u=e.n(o),g=e(78267),c=e.n(g),y=e(85893),l,d=new o.Terminal(r.a),f=new g.FitAddon,D=(0,O.forwardRef)(function(_,C){var i,h=function(){d.reset(),i&&i.dispose(),l&&(l.close(),l=null)},a=function(){d.reset(),f.fit(),d.focus(),i&&i.dispose(),i=d.onData(function(m){var E={content:{command:m},type:"console"};l&&l.send(JSON.stringify(E))})};return(0,O.useImperativeHandle)(C,function(){return{start:function(m,E){var W=E?Object.keys(E).map(function(M){if(E&&E[M])return"".concat(M,"=").concat(E[M])}):[];l=new WebSocket((0,T.R)("/console/"+m+"?"+W.join("&"))),l.addEventListener("message",function(M){var P=JSON.parse(M.data),t=P.type;if(t=="console:"+m&&(d.write(P.data),P.data.indexOf("exec failed")!=-1)){h();return}}),a()},close:function(){h()},fit:function(){f.fit()}}}),(0,O.useEffect)(function(){return d.loadAddon(f),d.open(document.getElementById("terminal-container-console")),f.fit(),function(){h()}},[]),(0,y.jsx)("div",{style:{height:_.showInDrawer?"75vh":"100vh"},id:"terminal-container-console"})});v.Z=D},54964:function(R,v,e){e.d(v,{a:function(){return D}});var O=e(5574),r=e.n(O),T=e(78267),o=e.n(T),u=e(75458),g=e.n(u),c=e(67294),y=e(12320),l=e.n(y),d=e(89629),f=e(85893),D={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},_=new y.Terminal(D),C=new u.SearchAddon,i=new T.FitAddon,h=(0,c.forwardRef)(function(a,A){var m,E=(0,c.useState)(!0),W=r()(E,2),M=W[0],P=W[1];return(0,c.useEffect)(function(){return window.addEventListener("resize",function(){a.showInModal||i.fit()}),a.style&&a.style.fontSize&&(_.options.fontSize=a.style.fontSize),_.loadAddon(i),_.loadAddon(C),_.open(document.getElementById(a.id?a.id:"terminal-container")),a.showInModal||i.fit(),function(){_.reset(),P(!0)}},[]),(0,c.useImperativeHandle)(A,function(){return{write:function(s){M&&(i.fit(),P(!1)),_.write(s)},clear:function(){_.clear()},getTerminal:function(){return _},findNext:function(s){C.findNext(s)},findPrev:function(s){C.findPrevious(s)},fit:function(){i.fit()},onData:function(s){return _.onData(s)}}}),(0,f.jsx)("div",{id:a.id?a.id:"terminal-container",style:{width:a.width?a.width:"100%",height:a.height?a.height:"500px",marginTop:(m=a.style)===null||m===void 0?void 0:m.marginTop}})});v.Z=h},33345:function(R,v,e){e.r(v),e.d(v,{default:function(){return l}});var O=e(5574),r=e.n(O),T=e(49610),o=e(60335),u=e(5251),g=e(82346),c=e(67294),y=e(85893);function l(){var d=(0,g.useParams)(),f=(0,g.useSearchParams)(),D=r()(f,2),_=D[0],C=D[1],i=(0,c.useRef)();return(0,c.useEffect)(function(){d.id&&(0,o.jV)({md5:d.id}).then(function(h){var a;window.document.title="console - ".concat((0,u.fi)(h.data.info.Name,"/")),d.id&&((a=i.current)===null||a===void 0||a.start(h.data.info.Id,{width:_.get("width"),height:_.get("height"),cmd:_.get("cmd"),workDir:_.get("workDir")}))}),document.body.style.overflow="hidden"},[]),(0,y.jsx)(T.Z,{ref:i})}},60335:function(R,v,e){e.d(v,{IE:function(){return y},IW:function(){return g},KK:function(){return C},LJ:function(){return h},RF:function(){return E},Re:function(){return A},aF:function(){return M},eE:function(){return D},jV:function(){return d}});var O=e(15009),r=e.n(O),T=e(99289),o=e.n(T),u=e(82346);function g(t){return c.apply(this,arguments)}function c(){return c=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/container/status",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),c.apply(this,arguments)}function y(t){return l.apply(this,arguments)}function l(){return l=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/container/get-list",{data:s,method:"POST"}));case 1:case"end":return n.stop()}},t)})),l.apply(this,arguments)}function d(t){return f.apply(this,arguments)}function f(){return f=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/container/get-detail",{data:s,method:"POST"}));case 1:case"end":return n.stop()}},t)})),f.apply(this,arguments)}function D(t){return _.apply(this,arguments)}function _(){return _=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/container/update",{data:s,method:"POST"}));case 1:case"end":return n.stop()}},t)})),_.apply(this,arguments)}function C(){return i.apply(this,arguments)}function i(){return i=o()(r()().mark(function t(){return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,u.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return p.stop()}},t)})),i.apply(this,arguments)}function h(t){return a.apply(this,arguments)}function a(){return a=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/container/export",{method:"POST",data:s,responseType:"blob"}));case 1:case"end":return n.stop()}},t)})),a.apply(this,arguments)}function A(t){return m.apply(this,arguments)}function m(){return m=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/container/commit",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),m.apply(this,arguments)}function E(t){return W.apply(this,arguments)}function W(){return W=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/container/upgrade",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),W.apply(this,arguments)}function M(t){return P.apply(this,arguments)}function P(){return P=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/container/copy",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),P.apply(this,arguments)}}}]);
